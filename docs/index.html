<!DOCTYPE html><html><head><title>Visualize Your Business Communications History- RingCentral Developer Tutorials</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="72x72" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="114x114" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/jquery-ui@1.12.1/themes/base/all.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div class="dpw-header-container"><div class="dpw-header center-section"><div class="logo"><a href="https://developers.ringcentral.com" class="logo-link"></a></div><div class="nav-top-menus"></div><div class="dpw-login-section"><a href="https://developer.ringcentral.com/login.html#/">Sign in | Sign up</a></div></div></div><div id="viewsaurus" data-title="Visualize Your Business Communications History"><div class="saurus-panes"><div class="saurus-panes-header"><a href="https://ringcentral.github.io/tutorials/" class="saurus-back-to-tutorials">Tutorials</a><span>&gt;</span><span>Visualize Your Business Communications History</span></div><div class="saurus-prose"><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw icon-menu"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Learn how to build a Web app to access your company's call log database by using the RingCentral call-log API. Then process the data and display the company's communications history on Google graphs. Click the &quot;Start Tutorial&quot; button below to start.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Visualize Your Business Communications History" class="chapter"></div><div data-title="Welcome!" data-file="../README.md" data-highlight="1-8" class="step"><h3 id="requirements">Requirements</h3>
<ul>
<li><p>You must have a RingCentral developer account. If you don&#39;t have one, click <a href="https://developer.ringcentral.com">here</a> to create a free developer account.</p>
</li>
<li><p>You also have to <a href="https://developer.ringcentral.com/library/getting-started.html">create a RingCentral app</a> with the &quot;ReadCallLog&quot; permission to retrieve the app Client Id and Client Secret for using with this tutorial.</p>
</li>
</ul>
</div><div data-title="Project setup" data-file="../README.md" data-highlight="12-22" class="step"><h3 id="clone-and-setup-the-project-from-github">Clone and setup the project from GitHub</h3>
<p>Run the commands shown on the right-hand side to clone the project from GitHub to your local machine.</p>
<p>Browse to the project folder on your local machine and install the dependency libraries.</p>
<p>Copy the dotenv to create the .env.</p>
</div><div data-title="Set environment" data-file="../dotenv" class="step"><h3 id="set-environment-parameters-and-login-credentials">Set environment parameters and login credentials</h3>
<p>Open the <strong>.env</strong> file and specify your app and login credentials.</p>
<p>You are good to run the demo now:</p>
<p>$ FLASK_APP=index.py flask run</p>
<p>Open your browser at <a href="http://localhost:5000">http://localhost:5000</a></p>
</div><div data-title="Design the Web app UI" data-file="../templates/index.html" data-highlight="39-42" class="step"><h3 id="add-the-from-and-to-date-pickers">Add the From and To date pickers</h3>
<p><img src="images/main_menu.png" alt=""></p>
<p>Now, let&#39;s create a web page and add 2 date pickers for taking the dates. The <em>From Date</em> and <em>To Date</em> will be used to specify the date range we want to read the call log data.</p>
<p>The call-log API also takes other query configurations, but they are less frequently needed in this tutorial so we hide them to save some space and make them visible when we click the <strong>Show Options</strong> button.</p>
</div><div data-title="Phone number and Extension number" data-file="../templates/index.html" data-highlight="53-56" class="step"><h3 id="add-the-phone-number-and-extension-number-filters-">Add the Phone number and Extension number filters.</h3>
<p><img src="images/Option1.png" alt=""></p>
<ul>
<li><p>If the <strong>phoneNumber</strong> parameter is specified, the API returns call logs (of both incoming and outgoing calls) containing the mentioned phone number of a caller or callee.</p>
</li>
<li><p>If the <strong>extensionNumber</strong> is specified, the API returns call logs for that particular extension only.</p>
</li>
</ul>
<p><a href="https://developer.ringcentral.com/api-docs/latest/index.html#!#RefUserCallLog.html">See call-log API reference</a></p>
</div><div data-title="Direction and Type filters" data-file="../templates/index.html" data-highlight="58-69" class="step"><h3 id="add-the-direction-and-type-filters-">Add the Direction and Type filters.</h3>
<p><img src="images/Option2.png" alt=""></p>
<ul>
<li><p>If the <strong>direction</strong> parameter is specified as <em>Inbound</em> or <em>Outbound</em>, the API returns call logs for the specified direction only. By default, the API returns call logs for both directions.</p>
</li>
<li><p>If the <strong>type</strong> parameter is specified as <em>Voice</em> or <em>Fax</em>, the API returns call logs for the specified type only. By default, the API returns call logs for both types.</p>
</li>
</ul>
<p><a href="https://developer.ringcentral.com/api-docs/latest/index.html#!#RefUserCallLog.html">See call-log API reference</a></p>
</div><div data-title="Transport and View filters" data-file="../templates/index.html" data-highlight="70-80" class="step"><h3 id="add-the-transport-and-view-filters-">Add the Transport and View filters.</h3>
<p><img src="images/Option3.png" alt=""></p>
<ul>
<li><p>If the <strong>transport</strong> parameter is specified as <em>PSTN</em> or <em>VoIP</em>, the API returns call logs for the specified transport only. By default, the API returns call logs for both transport modes.</p>
</li>
<li><p>The <strong>view</strong> parameter can be specified as <em>Simple</em> or <em>Detailed</em>, the API returns call logs with basic information or extended data (such as billing and leg type information), respectively. The default value is <em>Simple</em>.</p>
</li>
</ul>
<p><a href="https://developer.ringcentral.com/api-docs/latest/index.html#!#RefUserCallLog.html">See call-log API reference</a></p>
</div><div data-title="Blocked and recording calls" data-file="../templates/index.html" data-highlight="81-82" class="step"><h3 id="add-the-read-blocked-and-with-recording">Add the Read blocked and With recording</h3>
<p><img src="images/Option4.png" alt=""></p>
<ul>
<li><p>If the <strong>readBlocked</strong> flag is true, the API returns call logs for all calls within the date range, including calls from and to blocked numbers. The default value is <strong>true</strong>.</p>
</li>
<li><p>If the <strong>withRecoding</strong> flag is true, the API returns call logs for only calls with call recording. The default value is <strong>false</strong>.</p>
</li>
</ul>
<p><a href="https://developer.ringcentral.com/api-docs/latest/index.html#!#RefUserCallLog.html">See call-log API reference</a></p>
</div><div data-title="Control Access Level" data-file="../templates/index.html" data-highlight="46-50" class="step"><h3 id="add-the-dropdown-list-to-define-the-access-level">Add the dropdown list to define the access level</h3>
<p><img src="images/Options_Read.png" alt=""></p>
<p>We also control the access level by adding the control parameter to tell our server how to access the call log.</p>
<p><strong>Note:</strong> This is not the call-log API&#39;s parameter! It will be passed to our server for defining the API&#39;s access level.</p>
</div><div data-title="Create API query parameters" data-file="../static/js/main.js" data-highlight="552-576" class="step"><h3 id="create-api-query-parameters-client-side">Create API query parameters - Client side</h3>
<p>We input parameters and make a GET request to send them to our server side.</p>
<pre><code class="cm-s-monokai lang-js"><span class="cm-keyword">var</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span class="cm-string">&quot;readlogs?access=&quot;</span> <span class="cm-operator">+</span> <span class="cm-variable">$</span>(<span class="cm-string">&#39;#access_level&#39;</span>).<span class="cm-property">val</span>();
</code></pre>
</div><div data-title="Implement server code" data-file="../index.py" data-highlight="20-28" class="step"><h3 id="instantiate-the-ringcentral-python-sdk">Instantiate the RingCentral Python SDK</h3>
<p>First, we create the SDK instance <code>rcsdk</code> and initialize it with the app client Id and client Secret.</p>
<p>Then we call the <code>rcsdk.platform()</code> function to get the instance of the platform component. The <code>platform</code> instance will be used later to login and call RingCentral APIs.</p>
</div><div data-title="Login to RingCentral account" data-file="../index.py" data-highlight="30-36" class="step"><h3 id="login-to-ringcentral-account">Login to RingCentral account</h3>
<p>To login RingCentral account, we call the <code>platform.login()</code> function with the account&#39;s username and password predefined in the <em>.env</em> file.</p>
</div><div data-title="Call the call-log API" data-file="../index.py" data-highlight="38-62" class="step"><h3 id="call-the-call-log-api">Call the call-log API</h3>
<p>After logged in successfully, we call the readCallLogs() function and we detect if the request is made to access the account level or the extension level then we define the endpoint accordingly.</p>
<p>We receive the call-log API&#39;s query parameters from the client as a JSON object in the <strong>request.args.get(&#39;params&#39;, None)</strong>. We just use the <strong>platform</strong> instance to call the call-log API as highlighted below:</p>
<pre><code class="cm-s-monokai lang-python"><span class="cm-variable">params</span> = <span class="cm-variable">request</span>.<span class="cm-variable">args</span>.<span class="cm-variable">get</span>(<span class="cm-string">&#39;params&#39;</span>, <span class="cm-builtin">None</span>)
<span class="cm-variable">configs</span> = <span class="cm-variable">json</span>.<span class="cm-variable">loads</span>(<span class="cm-variable">params</span>)
<span class="cm-variable">response</span> = <span class="cm-variable">platform</span>.<span class="cm-variable">get</span>(<span class="cm-variable">endpoint</span>, <span class="cm-variable">configs</span>)
</code></pre>
</div><div data-title="Retrieve call log records" data-file="../index.py" data-highlight="50-51" class="step"><h3 id="retrieve-call-log-records">Retrieve call log records</h3>
<p>Assumed that the API call was successful and we get the response from RingCentral server. We then extract the records array and send it to our client side.</p>
<p>If the call failed, we catch the error and respond to our client with an error message accordingly.</p>
</div><div data-title="Parse call log data" data-file="../static/js/main.js" data-highlight="576-584" class="step"><h3 id="parse-call-log-data">Parse call log data</h3>
<p>Upon the arrival of the response from our server, we check the response to see if it is an error or not.</p>
<p>If the response is call log data, we create a <strong>CallLogsData</strong> object passing along the call log data. The <strong>CallLogsData</strong> object is a library which parses the call log data and process the information to make them ready for displaying on graphs.</p>
</div><div data-title="Process call log data" data-file="../static/js/main.js" data-highlight="62-102" class="step"><h3 id="process-call-log-data">Process call log data</h3>
<p>In the <strong>CallLogsData</strong> class constructor, we iterate thru the call log records array, detect the call type then count voice calls and faxes separately for different directions.</p>
<p>We also check the <strong>record.result</strong> to identify if a call was resulted in a <em>missed call</em> or has a <em>voicemail</em>.</p>
<p>To display overall calls results and actions, we implement a function <strong>__addItemToExistingList()</strong> to parse and keep the information in the following arrays:</p>
<pre><code class="cm-s-monokai lang-js"><span class="cm-keyword">this</span>.<span class="cm-property">faxInboundActions</span> <span class="cm-operator">=</span> []
<span class="cm-keyword">this</span>.<span class="cm-property">faxOutboundActions</span> <span class="cm-operator">=</span> []

<span class="cm-keyword">this</span>.<span class="cm-property">voiceInboundActions</span> <span class="cm-operator">=</span> []
<span class="cm-keyword">this</span>.<span class="cm-property">voiceOutboundActions</span> <span class="cm-operator">=</span> []

<span class="cm-keyword">this</span>.<span class="cm-property">faxInboundResults</span> <span class="cm-operator">=</span> []
<span class="cm-keyword">this</span>.<span class="cm-property">faxOutboundResults</span> <span class="cm-operator">=</span> []

<span class="cm-keyword">this</span>.<span class="cm-property">voiceInboundResults</span> <span class="cm-operator">=</span> []
<span class="cm-keyword">this</span>.<span class="cm-property">voiceOutboundResults</span> <span class="cm-operator">=</span> []
</code></pre>
</div><div data-title="Process call location" data-file="../static/js/main.js" data-highlight="103-134" class="step"><h3 id="process-call-location">Process call location</h3>
<p>To prepare for displaying call location on the Google map, we parse the location data and map the call location and count number in the following arrays:</p>
<pre><code class="cm-s-monokai lang-js"><span class="cm-keyword">this</span>.<span class="cm-property">inboundCallLocations</span> <span class="cm-operator">=</span> []
<span class="cm-keyword">this</span>.<span class="cm-property">outboundCallLocations</span> <span class="cm-operator">=</span> []
</code></pre>
</div><div data-title="Generate calls density data" data-file="../static/js/main.js" data-highlight="151-182" class="step"><h3 id="generate-calls-density-data">Generate calls density data</h3>
<p>To sketch calls density around the clock, we implement the <strong>__createCallsDensity()</strong> function to parse the <strong>startTime</strong> of each call, convert it to local time then map it to the 24-hour time scale.</p>
<pre><code class="cm-s-monokai lang-js"><span class="cm-keyword">this</span>.<span class="cm-property">timeSliceInbound</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Array</span>(<span class="cm-number">24</span>)
<span class="cm-keyword">this</span>.<span class="cm-property">timeSliceOutbound</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Array</span>(<span class="cm-number">24</span>)
<span class="cm-keyword">this</span>.<span class="cm-property">timeSliceMissedCalls</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Array</span>(<span class="cm-number">24</span>)
<span class="cm-keyword">this</span>.<span class="cm-property">timeSliceVoicemails</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Array</span>(<span class="cm-number">24</span>)
</code></pre>
</div><div data-title="Display information on charts" data-file="../static/js/main.js" data-highlight="476-549" class="step"><h3 id="display-information-on-charts">Display information on charts</h3>
<p>Finally, we implement the <strong>drawGraphs()</strong> function which will be called automatically after we read call log data from the server or whenever we select a new item from the <em>Select Graphs</em> dropdown list.</p>
<p>Within the <strong>drawGraphs()</strong> function, we call functions to collect relevant data and draw the chart accordingly.</p>
<p><img src="images/Chart_Options.png" alt=""></p>
</div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="../README.md" data-mode="markdown">IyMjIE92ZXJ2aWV3CkFjY2VzcyB5b3VyIFJpbmdDZW50cmFsIGFjY291bnQncyBjYWxsIGxvZyBkYXRhYmFzZSB1c2luZyB0aGUgY2FsbC1sb2cgQVBJLgoKIyMjIFJpbmdDZW50cmFsIENvbm5lY3QgUGxhdGZvcm0KUmluZ0NlbnRyYWwgQ29ubmVjdCBQbGF0Zm9ybSBpcyBhIHJpY2ggUkVTVGZ1bCBBUEkgcGxhdGZvcm0gd2l0aCBtb3JlIHRoYW4gNzAgQVBJcyBmb3IgYnVzaW5lc3MgY29tbXVuaWNhdGlvbiBpbmNsdWRlcyBhZHZhbmNlZCB2b2ljZSBjYWxscywgY2hhdCBtZXNzYWdpbmcsIFNNUy9NTVMgYW5kIEZheC4KCiMjIyBSaW5nQ2VudHJhbCBEZXZlbG9wZXIgUG9ydGFsClRvIHNldHVwIGEgZnJlZSBkZXZlbG9wZXIgYWNjb3VudCwgY2xpY2sgW2h0dHBzOi8vZGV2ZWxvcGVyL3JpbmdjZW50cmFsLmNvbV0oaGVyZSkKCiMjIyBDbG9uZSAtIFNldHVwIC0gUnVuIHRoZSBwcm9qZWN0CmBgYApnaXQgY2xvbmUgaHR0cHM6Ly9naXRodWIuY29tL3JpbmdjZW50cmFsLXR1dG9yaWFscy9jYWxsbG9nLXZpc3VhbGl6YXRpb24tcHl0aG9uLWRlbW8KCmNkIGNhbGxsb2ctdmlzdWFsaXphdGlvbi1weXRob24tZGVtbwoKcGlwIGluc3RhbGwgcmluZ2NlbnRyYWwKCnBpcCBpbnN0YWxsIHB5dGhvbi1kb3RlbnYKCnBpcCBpbnN0YWxsIEZsYXNrPT0xLjAuMgoKY3AgZG90ZW52IC5lbnYKCkZMQVNLX0FQUD1pbmRleC5weSBmbGFzayBydW4KYGBgClJlbWVtYmVyIHRvIGFkZCB5b3VyIGFwcCBjbGllbnQgaWQgYW5kIGNsaWVudCBzZWNyZXQgYXMgd2VsbCBhcyBhY2NvdW50IGxvZ2luIGNyZWRlbnRpYWxzIHRvIHRoZSAuZW52IGZpbGUuCgpPcGVuIHlvdXIgV2ViIGJyb3dzZXIgYW5kIGVudGVyIGxvY2FsaG9zdDo1MDAwCgojIyBSaW5nQ2VudHJhbCBQeXRob24gU0RLClRoZSBTREsgaXMgYXZhaWxhYmxlIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9yaW5nY2VudHJhbC9yaW5nY2VudHJhbC1weXRob24K</textarea>
<textarea class="saurus-file" data-file="../dotenv" data-mode="text">RU5WSVJPTk1FTlRfTU9ERT1zYW5kYm94CkNMSUVOVF9JRF9TQj1Zb3VyU2FuZGJveENsaWVuSWQKQ0xJRU5UX1NFQ1JFVF9TQj1Zb3VyU2FuZGJveENsaWVuU2VjcmV0CgpVU0VSTkFNRV9TQj1Zb3VyU2FuZGJveFVzZXJuYW1lClBBU1NXT1JEX1NCPVlvdXJTYW5kYm94UGFzc3dvcmQKRVhURU5TSU9OPQoKQ0xJRU5UX0lEX1BST0Q9WW91clByb2R1Y3Rpb25DbGllbnRJZApDTElFTlRfU0VDUkVUX1BST0Q9WW91clByb2R1Y3Rpb25DbGllbnRTZWNyZXQKClVTRVJOQU1FX1BST0Q9WW91clByb2R1Y3Rpb25Vc2VybmFtZQpQQVNTV09SRF9QUk9EPVlvdXJQcm9kdWN0aW9uUGFzc3dvcmQK</textarea>
<textarea class="saurus-file" data-file="../templates/index.html" data-mode="html">PCFkb2N0eXBlIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgIDx0aXRsZT5DYWxsIExvZ3MgVmlzdWFsaXphdGlvbiBEZW1vPC90aXRsZT4KICAgIDxzY3JpcHQgc3JjPSJzdGF0aWMvanMvbWFpbi5qcz92PTEuMDA0IiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9InN0YXRpYy9qcy9qcXVlcnktMy4xLjAubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NvZGUuanF1ZXJ5LmNvbS91aS8xLjEyLjEvanF1ZXJ5LXVpLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Imh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2NoYXJ0cy9sb2FkZXIuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NvZGUuanF1ZXJ5LmNvbS91aS8xLjEyLjEvdGhlbWVzL2Jhc2UvanF1ZXJ5LXVpLmNzcyI+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9InN0YXRpYy9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0ic3RhdGljL2Nzcy9tYWluLmNzcyI+CiAgICA8c2NyaXB0PgogICAgICBmdW5jdGlvbiBzaG93T3B0aW9ucyhlbG0pewogICAgICAgIGlmICgkKCIjbW9yZV9vcHRpb25zIikuaXMoIjp2aXNpYmxlIikpewogICAgICAgICAgJCgiI21vcmVfb3B0aW9ucyIpLmhpZGUoKQogICAgICAgICAgJChlbG0pLnRleHQoIk1vcmUgb3B0aW9ucyIpCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAkKCIjbW9yZV9vcHRpb25zIikuc2hvdygpCiAgICAgICAgICAkKGVsbSkudGV4dCgiTGVzcyBvcHRpb25zIikKICAgICAgICB9CiAgICAgIH0KICA8L3NjcmlwdD4KPC9oZWFkPgo8Ym9keT4KICA8bmF2IGNsYXNzPSJuYXZiYXIgbmF2YmFyLWRlZmF1bHQiPgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyLWZsdWlkIj4KICAgICAgPGRpdiBjbGFzcz0ibmF2YmFyLWhlYWRlciI+CiAgICAgICAgPGEgaHJlZj0iLyIgY2xhc3M9Im5hdmJhci1icmFuZCI+PGI+Q2FsbCBMb2dzPC9iPiBWSVNVQUxJWkFUSU9OPC9hPgogICAgICA8L2Rpdj4KICAgICAgPHVsIGNsYXNzPSJuYXYgbmF2YmFyLW5hdiBuYXZiYXItcmlnaHQiPgogICAgICAgIDxsaT48YSBocmVmPSJodHRwczovL3d3dy5yaW5nY2VudHJhbC5jb20iIHRhcmdldD0iX2JsYW5rIj5Qb3dlcmVkIGJ5Jm5ic3A7PGltZyBhbHQ9IkJyYW5kIiBzcmM9InN0YXRpYy9pbWcvcmluZ2NlbnRyYWwucG5nIiBoZWlnaHQ9IjIwIj48L2E+PC9saT4KICAgICAgPC91bD4KICAgIDwvZGl2PgogIDwvbmF2PgogIDxzZWN0aW9uIGlkPSJjb250ZW50Ij4KICAgIDxmb3JtIGNsYXNzPSJmb3JtLWlubGluZSI+CiAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgIDxsYWJlbCBmb3I9ImZyb21EYXRlIj5Gcm9tIERhdGU8L2xhYmVsPgogICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJmcm9tZGF0ZXBpY2tlciI+PC9pbnB1dD4mbmJzcDsmbmJzcDsKICAgICAgICA8bGFiZWwgZm9yPSJ0b0RhdGUiPlRvIERhdGU8L2xhYmVsPgogICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJ0b2RhdGVwaWNrZXIiPjwvaW5wdXQ+Jm5ic3A7CiAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4tYnV0dG9uIiBvbmNsaWNrPSJzaG93T3B0aW9ucyh0aGlzKSIgc3R5bGU9ImRpc3BsYXk6aW5saW5lIj5TaG93IG9wdGlvbnM8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1jYWxsIiBvbmNsaWNrPSJyZWFkQ2FsbExvZ3MoKSIgc3R5bGU9ImRpc3BsYXk6aW5saW5lIj5SZWFkPC9idXR0b24+CiAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgPGxhYmVsIGZvcj0iYWNjZXNzX2xldmVsIj5BY2Nlc3MgbGV2ZWw8L2xhYmVsPgogICAgICAgIDxzZWxlY3QgbmFtZT0iYWNjZXNzX2xldmVsIiBpZD0iYWNjZXNzX2xldmVsIiBzdHlsZT0iZGlzcGxheTppbmxpbmUiPgogICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYWNjb3VudCIgc2VsZWN0ZWQ+QWNjb3VudDwvb3B0aW9uPgogICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idXNlciI+RXh0ZW5zaW9uPC9vcHRpb24+CiAgICAgICAgPC9zZWxlY3Q+CgogICAgICAgIDxkaXYgaWQ9Im1vcmVfb3B0aW9ucyI+CiAgICAgICAgICA8bGFiZWwgZm9yPSJwaG9uZU51bWJlciI+UGhvbmUgTnVtYmVyPC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IGlkPSJwaG9uZU51bWJlciIgdHlwZT0idGV4dCIgc2l6ZT0iMTUiIHN0eWxlPSJkaXNwbGF5OmlubGluZSI+PC9pbnB1dD4mbmJzcDsmbmJzcDsKICAgICAgICAgIDxsYWJlbCBmb3I9ImV4dGVuc2lvbiI+RXh0ZW5zaW9uPC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IGlkPSJleHRlbnNpb24iIHR5cGU9InRleHQiIG5hbWU9ImV4dGVuc2lvbiIgc2l6ZT0iNSIgPjwvaW5wdXQ+Jm5ic3A7Jm5ic3A7CgogICAgICAgICAgPGxhYmVsIGZvcj0iZGlyZWN0aW9uIj5EaXJlY3Rpb248L2xhYmVsPgogICAgICAgICAgPHNlbGVjdCBuYW1lPSJkaXJlY3Rpb24iIGlkPSJkaXJlY3Rpb24iIHN0eWxlPSJkaXNwbGF5OmlubGluZSI+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRlZmF1bHQiIHNlbGVjdGVkPkRlZmF1bHQ8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iSW5ib3VuZCI+SW5ib3VuZDwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJPdXRib3VuZCI+T3V0Ym91bmQ8L29wdGlvbj4KICAgICAgICAgIDwvc2VsZWN0PiZuYnNwOyZuYnNwOwogICAgICAgICAgPGxhYmVsIGZvcj0idHlwZSI+VHlwZTwvbGFiZWw+CiAgICAgICAgICA8c2VsZWN0IG5hbWU9InR5cGUiIGlkPSJ0eXBlIiBzdHlsZT0iZGlzcGxheTppbmxpbmUiPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkZWZhdWx0IiBzZWxlY3RlZD5EZWZhdWx0PC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlZvaWNlIj5Wb2ljZTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJGYXgiPkZheDwvb3B0aW9uPgogICAgICAgICAgPC9zZWxlY3Q+Jm5ic3A7Jm5ic3A7CiAgICAgICAgICA8bGFiZWwgZm9yPSJ0cmFuc3BvcnQiPlRyYW5zcG9ydDwvbGFiZWw+CiAgICAgICAgICA8c2VsZWN0IG5hbWU9InRyYW5zcG9ydCIgaWQ9InRyYW5zcG9ydCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lIj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGVmYXVsdCIgc2VsZWN0ZWQ+RGVmYXVsdDwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQU1ROIj5QU1ROPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlZvSVAiPlZvSVA8L29wdGlvbj4KICAgICAgICAgIDwvc2VsZWN0PiZuYnNwOyZuYnNwOwogICAgICAgICAgPGxhYmVsIGZvcj0idmlldyI+VmlldzwvbGFiZWw+CiAgICAgICAgICA8c2VsZWN0IG5hbWU9InZpZXciIGlkPSJ2aWV3IiBzdHlsZT0iZGlzcGxheTppbmxpbmUiPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJTaW1wbGUiIHNlbGVjdGVkPlNpbXBsZTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJEZXRhaWxlZCI+RGV0YWlsZWQ8L29wdGlvbj4KICAgICAgICAgIDwvc2VsZWN0PiZuYnNwOyZuYnNwOwogICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0ic2hvd0Jsb2NrZWQiIGNoZWNrZWQ9dHJ1ZT4gU2hvdyBibG9ja2VkPC9pbnB1dD4mbmJzcDsmbmJzcDsKICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9IndpdGhSZWNvcmRpbmciPiBXaXRoIHJlY29yZGluZzwvaW5wdXQ+CiAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZm9ybT4KICAgIDxocj4KICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgIDxkaXYgY2xhc3M9ImNvbC14cy0xMiI+CiAgICAgICAgPGxhYmVsIGZvcj0iZ3JhcGhvcHRpb24iPlNlbGVjdCBHcmFwaHM8L2xhYmVsPgogICAgICAgIDxzZWxlY3QgaWQ9ImdyYXBob3B0aW9uIiBvbmNoYW5nZT0iZHJhd0dyYXBocygpIj4KICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImNhbGxieXR5cGUiPkNhbGxzIFR5cGVzPC9vcHRpb24+CiAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjYWxsYnlkdXJhdGlvbiI+Q2FsbHMgRHVyYXRpb24gJiBSZWNvcmRpbmc8L29wdGlvbj4KICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImZheGJ5ZHVyYXRpb24iPkZheGVzIER1cmF0aW9uPC9vcHRpb24+CiAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJpbmNhbGx3aXRocmVzdWx0cyI+SW5ib3VuZCBDYWxscyB3aXRoIFJlc3VsdHM8L29wdGlvbj4KICAgICAgICAgIDxvcHRpb24gdmFsdWU9Im91dGNhbGx3aXRocmVzdWx0cyI+T3V0Ym91bmQgQ2FsbHMgd2l0aCBSZXN1bHRzPC9vcHRpb24+CiAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJpbmZheHdpdGhyZXN1bHRzIj5JbmJvdW5kIEZheGVzIHdpdGggUmVzdWx0czwvb3B0aW9uPgogICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ib3V0ZmF4d2l0aHJlc3VsdHMiPk91dGJvdW5kIEZheGVzIHdpdGggUmVzdWx0czwvb3B0aW9uPgogICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iaW5jYWxsd2l0aGFjdGlvbnMiPkluYm91bmQgQ2FsbHMgd2l0aCBBY3Rpb25zPC9vcHRpb24+CiAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJvdXRjYWxsd2l0aGFjdGlvbnMiPk91dGJvdW5kIENhbGxzIHdpdGggQWN0aW9uczwvb3B0aW9uPgogICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iaW5mYXh3aXRoYWN0aW9ucyI+SW5ib3VuZCBGYXhlcyB3aXRoIEFjdGlvbnM8L29wdGlvbj4KICAgICAgICAgIDxvcHRpb24gdmFsdWU9Im91dGZheHdpdGhhY3Rpb25zIj5PdXRib3VuZCBGYXhlcyB3aXRoIEFjdGlvbnM8L29wdGlvbj4KICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImNhbGxzZGVuc2l0eSI+Q2FsbHMgRGVuc2l0eTwvb3B0aW9uPgogICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iY2FsbHNtYXAiPkNhbGxzIE1hcDwvb3B0aW9uPgogICAgICAgIDwvc2VsZWN0PiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOwogICAgICAgIDxzcGFuIGlkPSJ0aW1lem9uZV9ibG9jayIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+CiAgICAgICAgICA8bGFiZWwgZm9yPSJ0aW1lem9uZSI+VGltZSB6b25lPC9sYWJlbD4KICAgICAgICAgIDxzZWxlY3QgaWQ9InRpbWV6b25lIiBvbmNoYW5nZT0icmVmcmVzaEdyYXBoKCkiIHN0eWxlPSJkaXNwbGF5OmlubGluZSI+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ii0xMiI+LTEyPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ii0xMSI+LTExPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ii0xMCI+LTEwPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ii05Ij4tOTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSItOCI+LTg8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iLTciPi03PC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ii02Ij4tNjwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSItNSI+LTU8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iLTQiPi00PC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ii0zIj4tMzwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSItMiI+LTI8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iLTEiPi0xPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjAiIHNlbGVjdGVkPjA8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMSI+MTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIyIj4yPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjMiPjM8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNCI+NDwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI1Ij41PC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjYiPjY8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNyI+Nzwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI4Ij44PC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjkiPjk8L29wdGlvbj4KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMTAiPjEwPC9vcHRpb24+CiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjExIj4xMTwvb3B0aW9uPgogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxMiI+MTI8L29wdGlvbj4KICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgPC9zcGFuPgogICAgICAgICAgPHNwYW4gaWQ9Im1hcF9ibG9jayIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+CiAgICAgICAgICA8bGFiZWwgZm9yPSJvbm1hcCI+RGlyZWN0aW9uPC9sYWJlbD4KICAgICAgICAgICAgPHNlbGVjdCBpZD0ib25tYXAiIG9uY2hhbmdlPSJyZWZyZXNoR3JhcGgoKSIgc3R5bGU9ImRpc3BsYXk6aW5saW5lIj4KICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJib3RoIiBzZWxlY3RlZD5Cb3RoPC9vcHRpb24+CiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iaW5ib3VuZCI+SW5ib3VuZDwvb3B0aW9uPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Im91dGJvdW5kIj5PdXRib3VuZDwvb3B0aW9uPgogICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgIDx0YWJsZT4KICAgICAgICAgICAgPHRyIGlkPSJncmFwaHMiPjwvdHI+CiAgICAgICAgICA8L3RhYmxlPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgPC9zZWN0aW9uPgo8L2JvZHk+CjwvaHRtbD4K</textarea>
<textarea class="saurus-file" data-file="../static/js/main.js" data-mode="javascript">d2luZG93Lm9ubG9hZCA9IGluaXQ7DQp2YXIgY29sb3JzID0gWyJCbGFuY2hlZEFsbW9uZCIsIkJsdWUiLCJCbHVlVmlvbGV0IiwiQnJvd24iLCJCdXJseVdvb2QiLCJDYWRldEJsdWUiLCJDaGFydHJldXNlIiwiQ2hvY29sYXRlIiwiQ29yYWwiLCJDb3JuZmxvd2VyQmx1ZSIsIkNvcm5zaWxrIiwiQ3JpbXNvbiIsIkN5YW4iLCJEYXJrQmx1ZSIsIkRhcmtDeWFuIiwiRGFya0dvbGRlblJvZCIsIkRhcmtHcmF5IiwiRGFya0dyZXkiLCJEYXJrR3JlZW4iLCJEYXJrS2hha2kiLCJEYXJrTWFnZW50YSIsIkRhcmtPbGl2ZUdyZWVuIiwiRGFya29yYW5nZSIsIkRhcmtPcmNoaWQiXTsNCnZhciBjYWxsTG9nc0RhdGEgPSBudWxsDQpmdW5jdGlvbiBpbml0KCkgew0KICAkKCAiI2Zyb21kYXRlcGlja2VyIiApLmRhdGVwaWNrZXIoeyBkYXRlRm9ybWF0OiAieXktbW0tZGQifSk7DQogICQoICIjdG9kYXRlcGlja2VyIiApLmRhdGVwaWNrZXIoe2RhdGVGb3JtYXQ6ICJ5eS1tbS1kZCJ9KTsNCiAgdmFyIHBhc3RNb250aCA9IG5ldyBEYXRlKCk7DQogIHZhciBkYXkgPSBwYXN0TW9udGguZ2V0RGF0ZSgpDQogIHZhciBtb250aCA9IHBhc3RNb250aC5nZXRNb250aCgpIC0gMQ0KICB2YXIgeWVhciA9IHBhc3RNb250aC5nZXRGdWxsWWVhcigpDQogIGlmIChtb250aCA8IDApew0KICAgIG1vbnRoID0gMTENCiAgICB5ZWFyIC09IDENCiAgfQ0KICAkKCAiI2Zyb21kYXRlcGlja2VyIiApLmRhdGVwaWNrZXIoJ3NldERhdGUnLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KSk7DQogICQoICIjdG9kYXRlcGlja2VyIiApLmRhdGVwaWNrZXIoJ3NldERhdGUnLCBuZXcgRGF0ZSgpKTsNCg0KICBnb29nbGUuY2hhcnRzLmxvYWQoJ2N1cnJlbnQnLCB7J3BhY2thZ2VzJzpbJ2NvcmVjaGFydCddfSk7DQogIGdvb2dsZS5jaGFydHMubG9hZCgnY3VycmVudCcsIHsgJ3BhY2thZ2VzJzogWydtYXAnXSB9KTsNCn0NCg0KLy8gTWFpbiBjbGFzcw0KZnVuY3Rpb24gQ2FsbExvZ3NEYXRhKHJlY29yZHMpIHsNCiAgdGhpcy5yZWNvcmRzID0gcmVjb3Jkcw0KICB0aGlzLnRpbWVTbGljZUluYm91bmQgPSBuZXcgQXJyYXkoMjQpDQogIHRoaXMudGltZVNsaWNlT3V0Ym91bmQgPSBuZXcgQXJyYXkoMjQpDQogIHRoaXMudGltZVNsaWNlTWlzc2VkQ2FsbHMgPSBuZXcgQXJyYXkoMjQpDQogIHRoaXMudGltZVNsaWNlVm9pY2VtYWlscyA9IG5ldyBBcnJheSgyNCkNCiAgdGhpcy5pbmNhbGxDb3VudCA9IDA7DQogIHRoaXMub3V0Y2FsbENvdW50ID0gMA0KICB0aGlzLnZvaWNlQ2FsbENvdW50ID0gMA0KICB0aGlzLnZvaWNlbWFpbENvdW50ID0gMA0KICB0aGlzLmZheENhbGxDb3VudCA9IDANCg0KICB0aGlzLmluZmF4Q291bnQgPSAwDQogIHRoaXMub3V0ZmF4Q291bnQgPSAwDQogIHRoaXMudG90YWxJbmZheGVzRHVyYXRpb24gPSAwDQogIHRoaXMudG90YWxPdXRmYXhlc0R1cmF0aW9uID0gMA0KDQogIHRoaXMubWlzc2VkQ2FsbENvdW50ID0gMA0KICB0aGlzLmluY2FsbFJlY29yZGluZ0NvdW50ID0gMA0KICB0aGlzLm91dGNhbGxSZWNvcmRpbmdDb3VudCA9IDANCg0KICB0aGlzLnRvdGFsSW5jYWxsc0R1cmF0aW9uID0gMA0KICB0aGlzLnRvdGFsT3V0Y2FsbHNEdXJhdGlvbiA9IDANCiAgdGhpcy5pbmJvdW5kQ2FsbExvY2F0aW9ucyA9IFtdDQogIHRoaXMub3V0Ym91bmRDYWxsTG9jYXRpb25zID0gW10NCg0KICB0aGlzLmZheEluYm91bmRBY3Rpb25zID0gW10NCiAgdGhpcy5mYXhPdXRib3VuZEFjdGlvbnMgPSBbXQ0KDQogIHRoaXMudm9pY2VJbmJvdW5kQWN0aW9ucyA9IFtdDQogIHRoaXMudm9pY2VPdXRib3VuZEFjdGlvbnMgPSBbXQ0KDQogIHRoaXMuZmF4SW5ib3VuZFJlc3VsdHMgPSBbXQ0KICB0aGlzLmZheE91dGJvdW5kUmVzdWx0cyA9IFtdDQoNCiAgdGhpcy52b2ljZUluYm91bmRSZXN1bHRzID0gW10NCiAgdGhpcy52b2ljZU91dGJvdW5kUmVzdWx0cyA9IFtdDQoNCiAgdmFyIHRpbWVab25lID0gcGFyc2VJbnQoJCgiI3RpbWV6b25lIikudmFsKCksIDEwKTsNCg0KICBmb3IgKHZhciByZWNvcmQgb2YgdGhpcy5yZWNvcmRzKXsNCiAgICB0cnkgew0KICAgICAgaWYgKHJlY29yZC50eXBlID09ICJGYXgiKSB7DQogICAgICAgIGlmIChyZWNvcmQuZGlyZWN0aW9uID09ICJJbmJvdW5kIikgew0KICAgICAgICAgIHRoaXMuaW5mYXhDb3VudCArPSAxIC8vIGNoZWNrDQogICAgICAgICAgdGhpcy50b3RhbEluZmF4ZXNEdXJhdGlvbiArPSByZWNvcmQuZHVyYXRpb24NCiAgICAgICAgICB0aGlzLl9fYWRkSXRlbVRvRXhpc3RpbmdMaXN0KHJlY29yZC5hY3Rpb24sIHRoaXMuZmF4SW5ib3VuZEFjdGlvbnMpDQogICAgICAgICAgdGhpcy5fX2FkZEl0ZW1Ub0V4aXN0aW5nTGlzdChyZWNvcmQucmVzdWx0LCB0aGlzLmZheEluYm91bmRSZXN1bHRzKQ0KICAgICAgICB9ZWxzZSB7IC8vIG91dGJvdW5kIGZheC4NCiAgICAgICAgICB0aGlzLm91dGZheENvdW50ICs9IDEgLy8gY2hlY2sNCiAgICAgICAgICB0aGlzLnRvdGFsT3V0ZmF4ZXNEdXJhdGlvbiArPSByZWNvcmQuZHVyYXRpb24NCiAgICAgICAgICB0aGlzLl9fYWRkSXRlbVRvRXhpc3RpbmdMaXN0KHJlY29yZC5hY3Rpb24sIHRoaXMuZmF4T3V0Ym91bmRBY3Rpb25zKQ0KICAgICAgICAgIHRoaXMuX19hZGRJdGVtVG9FeGlzdGluZ0xpc3QocmVjb3JkLnJlc3VsdCwgdGhpcy5mYXhPdXRib3VuZFJlc3VsdHMpDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5mYXhDYWxsQ291bnQgKz0gMQ0KICAgICAgfWVsc2V7IC8vIHZvaWNlIGNhbGwNCiAgICAgICAgaWYgKHJlY29yZC5kaXJlY3Rpb24gPT0gIkluYm91bmQiKSB7DQogICAgICAgICAgdGhpcy5pbmNhbGxDb3VudCArPSAxDQogICAgICAgICAgdGhpcy50b3RhbEluY2FsbHNEdXJhdGlvbiArPSByZWNvcmQuZHVyYXRpb24NCiAgICAgICAgICBpZiAocmVjb3JkLnJlY29yZGluZyAhPSB1bmRlZmluZWQpew0KICAgICAgICAgICAgdGhpcy5pbmNhbGxSZWNvcmRpbmdDb3VudCArPSAxDQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuX19hZGRJdGVtVG9FeGlzdGluZ0xpc3QocmVjb3JkLmFjdGlvbiwgdGhpcy52b2ljZUluYm91bmRBY3Rpb25zKQ0KICAgICAgICAgIHRoaXMuX19hZGRJdGVtVG9FeGlzdGluZ0xpc3QocmVjb3JkLnJlc3VsdCwgdGhpcy52b2ljZUluYm91bmRSZXN1bHRzKQ0KICAgICAgICB9ZWxzZXsgLy8gb3V0Ym91bmQgY2FsbC4NCiAgICAgICAgICB0aGlzLm91dGNhbGxDb3VudCArPSAxDQogICAgICAgICAgdGhpcy50b3RhbE91dGNhbGxzRHVyYXRpb24gKz0gcmVjb3JkLmR1cmF0aW9uDQogICAgICAgICAgaWYgKHJlY29yZC5yZWNvcmRpbmcgIT0gdW5kZWZpbmVkKXsNCiAgICAgICAgICAgIHRoaXMub3V0Y2FsbFJlY29yZGluZ0NvdW50ICs9IDENCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5fX2FkZEl0ZW1Ub0V4aXN0aW5nTGlzdChyZWNvcmQuYWN0aW9uLCB0aGlzLnZvaWNlT3V0Ym91bmRBY3Rpb25zKQ0KICAgICAgICAgIHRoaXMuX19hZGRJdGVtVG9FeGlzdGluZ0xpc3QocmVjb3JkLnJlc3VsdCwgdGhpcy52b2ljZU91dGJvdW5kUmVzdWx0cykNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnZvaWNlQ2FsbENvdW50ICs9IDENCiAgICAgIH0NCiAgICAgIGlmIChyZWNvcmQucmVzdWx0ID09ICJNaXNzZWQiKSB7DQogICAgICAgIHRoaXMubWlzc2VkQ2FsbENvdW50ICs9IDENCiAgICAgIH1lbHNlIGlmIChyZWNvcmQucmVzdWx0ID09ICJWb2ljZW1haWwiKXsNCiAgICAgICAgdGhpcy52b2ljZW1haWxDb3VudCArPSAxDQogICAgICB9DQogICAgICBpZiAocmVjb3JkLmZyb20gJiYgcmVjb3JkLmZyb20uaGFzT3duUHJvcGVydHkoJ2xvY2F0aW9uJykpew0KICAgICAgICB2YXIgbG9jID0ge30NCiAgICAgICAgbG9jWydjaXR5J10gPSByZWNvcmQuZnJvbS5sb2NhdGlvbg0KICAgICAgICBsb2NbJ2NvdW50J10gPSAxDQogICAgICAgIHZhciBhZGQgPSB0cnVlDQogICAgICAgIGZvciAodmFyIG49MDsgbjx0aGlzLmluYm91bmRDYWxsTG9jYXRpb25zLmxlbmd0aDsgbisrKSB7DQogICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmluYm91bmRDYWxsTG9jYXRpb25zW25dDQogICAgICAgICAgaWYgKGl0ZW0uY2l0eSA9PSBsb2MuY2l0eSl7DQogICAgICAgICAgICB0aGlzLmluYm91bmRDYWxsTG9jYXRpb25zW25dLmNvdW50ICs9IDENCiAgICAgICAgICAgIGFkZCA9IGZhbHNlDQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKGFkZCkNCiAgICAgICAgICB0aGlzLmluYm91bmRDYWxsTG9jYXRpb25zLnB1c2gobG9jKQ0KICAgICAgfQ0KICAgICAgaWYgKHJlY29yZC50byAmJiByZWNvcmQudG8uaGFzT3duUHJvcGVydHkoJ2xvY2F0aW9uJykpew0KICAgICAgICB2YXIgbG9jID0ge30NCiAgICAgICAgbG9jWydjaXR5J10gPSByZWNvcmQudG8ubG9jYXRpb24NCiAgICAgICAgbG9jWydjb3VudCddID0gMQ0KICAgICAgICB2YXIgYWRkID0gdHJ1ZQ0KICAgICAgICBmb3IgKHZhciBuPTA7IG48dGhpcy5vdXRib3VuZENhbGxMb2NhdGlvbnMubGVuZ3RoOyBuKyspIHsNCiAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMub3V0Ym91bmRDYWxsTG9jYXRpb25zW25dDQogICAgICAgICAgaWYgKGl0ZW0uY2l0eSA9PSBsb2MuY2l0eSl7DQogICAgICAgICAgICB0aGlzLm91dGJvdW5kQ2FsbExvY2F0aW9uc1tuXS5jb3VudCArPSAxDQogICAgICAgICAgICBhZGQgPSBmYWxzZQ0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmIChhZGQpDQogICAgICAgICAgdGhpcy5vdXRib3VuZENhbGxMb2NhdGlvbnMucHVzaChsb2MpDQogICAgICB9DQogICAgfWNhdGNoIChleCkgew0KICAgICAgYWxlcnQoZXgpDQogICAgfQ0KICB9DQp9DQoNCkNhbGxMb2dzRGF0YS5wcm90b3R5cGUgPSB7DQogIF9fY29udmVydFRpbWVab25lOiBmdW5jdGlvbihnbXRUaW1lLCB0aW1lWm9uZSkgew0KICAgIHZhciBob3VyID0gcGFyc2VJbnQoZ210VGltZSwgMTApOw0KICAgIGhvdXIgPSBob3VyICsgdGltZVpvbmUNCiAgICBpZiAoaG91ciA8IDApDQogICAgICBob3VyID0gMjQgKyBob3VyDQogICAgaWYgKGhvdXIgPiAyNCkNCiAgICAgIGhvdXIgPSBob3VyIC0gMjQNCiAgICByZXR1cm4gaG91cg0KICB9LA0KICBfX2NyZWF0ZUNhbGxzRGVuc2l0eTogZnVuY3Rpb24oKSB7DQogICAgZm9yICh2YXIgbj0wOyBuPDI0OyBuKyspew0KICAgICAgdGhpcy50aW1lU2xpY2VJbmJvdW5kW25dID0gMA0KICAgICAgdGhpcy50aW1lU2xpY2VPdXRib3VuZFtuXSA9IDANCiAgICAgIHRoaXMudGltZVNsaWNlTWlzc2VkQ2FsbHNbbl0gPSAwDQogICAgICB0aGlzLnRpbWVTbGljZVZvaWNlbWFpbHNbbl0gPSAwDQogICAgfQ0KICAgIHZhciB0aW1lVmFsID0gJCgiI3RpbWV6b25lIikudmFsKCkNCg0KICAgIHZhciB0aW1lWm9uZSA9IHBhcnNlSW50KHRpbWVWYWwsIDEwKTsNCiAgICBmb3IgKHZhciBpPTA7IGk8dGhpcy5yZWNvcmRzLmxlbmd0aDsgaSsrKXsNCiAgICAgIHZhciByZWNvcmQgPSB0aGlzLnJlY29yZHNbaV0NCiAgICAgIGlmIChyZWNvcmQuZGlyZWN0aW9uID09ICJJbmJvdW5kIikgew0KICAgICAgICB2YXIgdHdlbnR5NGhvdXIgPSByZWNvcmQuc3RhcnRUaW1lLnN1YnN0cmluZygxMSwgMTMpDQogICAgICAgIHZhciBob3VyID0gdGhpcy5fX2NvbnZlcnRUaW1lWm9uZSh0d2VudHk0aG91ciwgdGltZVpvbmUpDQogICAgICAgIHRoaXMudGltZVNsaWNlSW5ib3VuZFtob3VyXSArPSAxDQogICAgICB9ZWxzZXsgLy8gb3V0Ym91bmQgY2FsbC4gQWRqdXN0IHN0YXJ0IHRpbWUgd2l0aCB1c2VyJ3MgdGltZSB6b25lDQogICAgICAgIHZhciB0d2VudHk0aG91ciA9IHJlY29yZC5zdGFydFRpbWUuc3Vic3RyaW5nKDExLCAxMykNCiAgICAgICAgdmFyIGhvdXIgPSB0aGlzLl9fY29udmVydFRpbWVab25lKHR3ZW50eTRob3VyLCB0aW1lWm9uZSkNCiAgICAgICAgdGhpcy50aW1lU2xpY2VPdXRib3VuZFtob3VyXSArPSAxDQogICAgICB9DQogICAgICBpZiAocmVjb3JkLnJlc3VsdCA9PSAiTWlzc2VkIikgew0KICAgICAgICB2YXIgdHdlbnR5NGhvdXIgPSByZWNvcmQuc3RhcnRUaW1lLnN1YnN0cmluZygxMSwgMTMpDQogICAgICAgIHZhciBob3VyID0gdGhpcy5fX2NvbnZlcnRUaW1lWm9uZSh0d2VudHk0aG91ciwgdGltZVpvbmUpDQogICAgICAgIHRoaXMudGltZVNsaWNlTWlzc2VkQ2FsbHNbaG91cl0gKz0gMQ0KICAgICAgfWVsc2UgaWYgKHJlY29yZC5yZXN1bHQgPT0gIlZvaWNlbWFpbCIpew0KICAgICAgICB2YXIgdHdlbnR5NGhvdXIgPSByZWNvcmQuc3RhcnRUaW1lLnN1YnN0cmluZygxMSwgMTMpDQogICAgICAgIHZhciBob3VyID0gdGhpcy5fX2NvbnZlcnRUaW1lWm9uZSh0d2VudHk0aG91ciwgdGltZVpvbmUpDQogICAgICAgIHRoaXMudGltZVNsaWNlVm9pY2VtYWlsc1tob3VyXSArPSAxDQogICAgICB9DQogICAgfQ0KICB9LA0KICBfX2FkZEl0ZW1Ub0V4aXN0aW5nTGlzdDogZnVuY3Rpb24ob2JqLCBvYmplY3RMaXN0KSB7DQogICAgZm9yICh2YXIgdD0wOyB0PG9iamVjdExpc3QubGVuZ3RoOyB0Kyspew0KICAgICAgaWYgKG9iamVjdExpc3RbdF0ubmFtZSA9PSBvYmopew0KICAgICAgICBvYmplY3RMaXN0W3RdLmNvdW50KysNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgfQ0KICAgIHZhciB0eXBlID0ge30NCiAgICB0eXBlWyduYW1lJ10gPSBvYmoNCiAgICB0eXBlWydjb3VudCddID0gMQ0KICAgIG9iamVjdExpc3QucHVzaCh0eXBlKQ0KICB9LA0KICBGYXhWc1ZvaWNlR3JhcGg6IGZ1bmN0aW9uKHcsIGgpew0KICAgIHZhciBwYXJhbXMgPSBbXTsNCiAgICB2YXIgYXJyID0gWydWb2ljZSB2cy4gRmF4JywgJ1R5cGUnLCB7IHJvbGU6ICJzdHlsZSIgfSBdOw0KICAgIHBhcmFtcy5wdXNoKGFycik7DQogICAgdmFyIGl0ZW0gPSBbIlZvaWNlIiwgdGhpcy52b2ljZUNhbGxDb3VudCwgImdyZWVuIl07DQogICAgcGFyYW1zLnB1c2goaXRlbSk7DQoNCiAgICBpdGVtID0gWyJGYXgiLCB0aGlzLmZheENhbGxDb3VudCwgImJsdWUiXTsNCiAgICBwYXJhbXMucHVzaChpdGVtKTsNCiAgICBkcmF3QmFyQ2hhcnQodywgaCwgcGFyYW1zKTsNCiAgfSwNCiAgQ2FsbHNGYXhlc0J5RGlyZWN0aW9uR3JhcGg6IGZ1bmN0aW9uKHcsIGgpew0KICAgIHZhciBwYXJhbXMgPSBbXTsNCiAgICB2YXIgYXJyID0gWydDYWxscyBhbmQgRmF4ZXMgYnkgZGlyZWN0aW9uJywgJ0RpcmVjdGlvbicsIHsgcm9sZTogInN0eWxlIiB9IF07DQogICAgcGFyYW1zLnB1c2goYXJyKTsNCiAgICB2YXIgaXRlbSA9IFsiSW5ib3VuZCBDYWxsIiwgdGhpcy5pbmNhbGxDb3VudCwgImJsdWUiXTsNCiAgICBwYXJhbXMucHVzaChpdGVtKTsNCg0KICAgIGl0ZW0gPSBbIk91dGJvdW5kIENhbGwiLCB0aGlzLm91dGNhbGxDb3VudCwgImdyZWVuIl07DQogICAgcGFyYW1zLnB1c2goaXRlbSk7DQoNCiAgICB2YXIgaXRlbSA9IFsiSW5ib3VuZCBGYXgiLCB0aGlzLmluZmF4Q291bnQsICJyZWQiXTsNCiAgICBwYXJhbXMucHVzaChpdGVtKTsNCg0KICAgIGl0ZW0gPSBbIk91dGJvdW5kIEZheCIsIHRoaXMub3V0ZmF4Q291bnQsICJicm93biJdOw0KICAgIHBhcmFtcy5wdXNoKGl0ZW0pOw0KDQogICAgZHJhd0JhckNoYXJ0KHcsIGgsIHBhcmFtcyk7DQogIH0sDQogIENhbGxzV2l0aFJlc3VsdHNHcmFwaDogZnVuY3Rpb24odywgaCwgdHlwZSl7DQogICAgdmFyIHBhcmFtcyA9IFtdOw0KICAgIHZhciBpbmRleCA9IDENCiAgICBpZiAodHlwZSA9PSAiaW5jYWxsIil7DQogICAgICB2YXIgYXJyID0gWydJbmJvdW5kIENhbGxzIHdpdGggUmVzdWx0cycsICdSZXN1bHRzJywgeyByb2xlOiAic3R5bGUiIH0gXTsNCiAgICAgIHBhcmFtcy5wdXNoKGFycik7DQogICAgICB2YXIgdG90YWwgPSBbIlRvdGFsIiwgdGhpcy5pbmNhbGxDb3VudCwgY29sb3JzWzBdXQ0KICAgICAgcGFyYW1zLnB1c2godG90YWwpDQogICAgICBmb3IgKHZhciByZXN1bHQgb2YgdGhpcy52b2ljZUluYm91bmRSZXN1bHRzKXsNCiAgICAgICAgdmFyIGl0ZW0gPSBbcmVzdWx0Lm5hbWUsIHJlc3VsdC5jb3VudCwgY29sb3JzW2luZGV4XV07DQogICAgICAgIGluZGV4KysNCiAgICAgICAgcGFyYW1zLnB1c2goaXRlbSk7DQogICAgICB9DQogICAgfWVsc2UgaWYgKHR5cGUgPT0gIm91dGNhbGwiKXsNCiAgICAgIHZhciBhcnIgPSBbJ091dGJvdW5kIENhbGxzIHdpdGggUmVzdWx0cycsICdSZXN1bHRzJywgeyByb2xlOiAic3R5bGUiIH0gXTsNCiAgICAgIHBhcmFtcy5wdXNoKGFycikNCiAgICAgIHZhciB0b3RhbCA9IFsiVG90YWwiLCB0aGlzLm91dGNhbGxDb3VudCwgY29sb3JzWzBdXQ0KICAgICAgcGFyYW1zLnB1c2godG90YWwpDQogICAgICBmb3IgKHZhciByZXN1bHQgb2YgdGhpcy52b2ljZU91dGJvdW5kUmVzdWx0cyl7DQogICAgICAgIHZhciBpdGVtID0gW3Jlc3VsdC5uYW1lLCByZXN1bHQuY291bnQsIGNvbG9yc1tpbmRleF1dOw0KICAgICAgICBpbmRleCsrDQogICAgICAgIHBhcmFtcy5wdXNoKGl0ZW0pOw0KICAgICAgfQ0KICAgIH1lbHNlIGlmICh0eXBlID09ICJpbmZheCIpew0KICAgICAgdmFyIGFyciA9IFsnSW5ib3VuZCBGYXhlcyB3aXRoIFJlc3VsdHMnLCAnUmVzdWx0cycsIHsgcm9sZTogInN0eWxlIiB9IF07DQogICAgICBwYXJhbXMucHVzaChhcnIpOw0KICAgICAgdmFyIHRvdGFsID0gWyJUb3RhbCIsIHRoaXMuaW5mYXhDb3VudCwgY29sb3JzWzBdXQ0KICAgICAgcGFyYW1zLnB1c2godG90YWwpDQogICAgICBmb3IgKHZhciByZXN1bHQgb2YgdGhpcy5mYXhJbmJvdW5kUmVzdWx0cyl7DQogICAgICAgIHZhciBpdGVtID0gW3Jlc3VsdC5uYW1lLCByZXN1bHQuY291bnQsIGNvbG9yc1tpbmRleF1dOw0KICAgICAgICBpbmRleCsrDQogICAgICAgIHBhcmFtcy5wdXNoKGl0ZW0pOw0KICAgICAgfQ0KICAgIH1lbHNlIGlmICh0eXBlID09ICJvdXRmYXgiKXsNCiAgICAgIHZhciBhcnIgPSBbJ091dGJvdW5kIEZheGVzIHdpdGggUmVzdWx0cycsICdSZXN1bHRzJywgeyByb2xlOiAic3R5bGUiIH0gXTsNCiAgICAgIHBhcmFtcy5wdXNoKGFycik7DQogICAgICB2YXIgdG90YWwgPSBbIlRvdGFsIiwgdGhpcy5vdXRmYXhDb3VudCwgY29sb3JzWzBdXQ0KICAgICAgcGFyYW1zLnB1c2godG90YWwpDQogICAgICBmb3IgKHZhciByZXN1bHQgb2YgdGhpcy5mYXhPdXRib3VuZFJlc3VsdHMpew0KICAgICAgICB2YXIgaXRlbSA9IFtyZXN1bHQubmFtZSwgcmVzdWx0LmNvdW50LCBjb2xvcnNbaW5kZXhdXTsNCiAgICAgICAgaW5kZXgrKw0KICAgICAgICBwYXJhbXMucHVzaChpdGVtKTsNCiAgICAgIH0NCiAgICB9DQogICAgZHJhd0JhckNoYXJ0KHcsIGgsIHBhcmFtcyk7DQogIH0sDQogIENhbGxzV2l0aEFjdGlvbnNHcmFwaDogZnVuY3Rpb24odywgaCwgdHlwZSl7DQogICAgdmFyIHBhcmFtcyA9IFtdOw0KICAgIHZhciBpbmRleCA9IDENCiAgICBpZiAodHlwZSA9PSAiaW5jYWxsIil7DQogICAgICB2YXIgYXJyID0gWydJbmJvdW5kIENhbGxzIHdpdGggQWN0aW9ucycsICdBY3Rpb25zJywgeyByb2xlOiAic3R5bGUiIH0gXTsNCiAgICAgIHBhcmFtcy5wdXNoKGFycik7DQogICAgICB2YXIgdG90YWwgPSBbIlRvdGFsIiwgdGhpcy5pbmNhbGxDb3VudCwgY29sb3JzWzBdXQ0KICAgICAgcGFyYW1zLnB1c2godG90YWwpDQogICAgICBmb3IgKHZhciByZXN1bHQgb2YgdGhpcy52b2ljZUluYm91bmRBY3Rpb25zKXsNCiAgICAgICAgdmFyIGl0ZW0gPSBbcmVzdWx0Lm5hbWUsIHJlc3VsdC5jb3VudCwgY29sb3JzW2luZGV4XV07DQogICAgICAgIGluZGV4KysNCiAgICAgICAgcGFyYW1zLnB1c2goaXRlbSk7DQogICAgICB9DQogICAgfWVsc2UgaWYgKHR5cGUgPT0gIm91dGNhbGwiKXsNCiAgICAgIHZhciBhcnIgPSBbJ091dGJvdW5kIENhbGxzIHdpdGggQWN0aW9ucycsICdBY3Rpb25zJywgeyByb2xlOiAic3R5bGUiIH0gXTsNCiAgICAgIHBhcmFtcy5wdXNoKGFycik7DQogICAgICB2YXIgdG90YWwgPSBbIlRvdGFsIiwgdGhpcy5vdXRjYWxsQ291bnQsIGNvbG9yc1swXV0NCiAgICAgIHBhcmFtcy5wdXNoKHRvdGFsKQ0KICAgICAgZm9yICh2YXIgcmVzdWx0IG9mIHRoaXMudm9pY2VPdXRib3VuZEFjdGlvbnMpew0KICAgICAgICB2YXIgaXRlbSA9IFtyZXN1bHQubmFtZSwgcmVzdWx0LmNvdW50LCBjb2xvcnNbaW5kZXhdXTsNCiAgICAgICAgaW5kZXgrKw0KICAgICAgICBwYXJhbXMucHVzaChpdGVtKTsNCiAgICAgIH0NCiAgICB9ZWxzZSBpZiAodHlwZSA9PSAiaW5mYXgiKXsNCiAgICAgIHZhciBhcnIgPSBbJ0luYm91bmQgRmF4ZXMgd2l0aCBBY3Rpb25zJywgJ0FjdGlvbnMnLCB7IHJvbGU6ICJzdHlsZSIgfSBdOw0KICAgICAgcGFyYW1zLnB1c2goYXJyKTsNCiAgICAgIHZhciB0b3RhbCA9IFsiVG90YWwiLCB0aGlzLmluZmF4Q291bnQsIGNvbG9yc1swXV0NCiAgICAgIHBhcmFtcy5wdXNoKHRvdGFsKQ0KICAgICAgZm9yICh2YXIgcmVzdWx0IG9mIHRoaXMuZmF4SW5ib3VuZEFjdGlvbnMpew0KICAgICAgICB2YXIgaXRlbSA9IFtyZXN1bHQubmFtZSwgcmVzdWx0LmNvdW50LCBjb2xvcnNbaW5kZXhdXTsNCiAgICAgICAgaW5kZXgrKw0KICAgICAgICBwYXJhbXMucHVzaChpdGVtKTsNCiAgICAgIH0NCiAgICB9ZWxzZSBpZiAodHlwZSA9PSAib3V0ZmF4Iil7DQogICAgICB2YXIgYXJyID0gWydPdXRib3VuZCBGYXhlcyB3aXRoIEFjdGlvbnMnLCAnQWN0aW9ucycsIHsgcm9sZTogInN0eWxlIiB9IF07DQogICAgICBwYXJhbXMucHVzaChhcnIpOw0KICAgICAgdmFyIHRvdGFsID0gWyJUb3RhbCIsIHRoaXMub3V0ZmF4Q291bnQsIGNvbG9yc1swXV0NCiAgICAgIHBhcmFtcy5wdXNoKHRvdGFsKQ0KICAgICAgZm9yICh2YXIgcmVzdWx0IG9mIHRoaXMuZmF4T3V0Ym91bmRBY3Rpb25zKXsNCiAgICAgICAgdmFyIGl0ZW0gPSBbcmVzdWx0Lm5hbWUsIHJlc3VsdC5jb3VudCwgY29sb3JzW2luZGV4XV07DQogICAgICAgIGluZGV4KysNCiAgICAgICAgcGFyYW1zLnB1c2goaXRlbSk7DQogICAgICB9DQogICAgfQ0KICAgIGRyYXdCYXJDaGFydCh3LCBoLCBwYXJhbXMpOw0KICB9LA0KICBNaXNzZWRWb2ljZW1haWxHcmFwaDogZnVuY3Rpb24odywgaCl7DQogICAgdmFyIHBhcmFtcyA9IFtdOw0KICAgIHZhciBhcnIgPSBbJ1RvdGFsIHZzLiBNaXNzZWQgY2FsbHMgdnMuIFZvaWNlbWFpbCcsICdNZXNzYWdlJywgeyByb2xlOiAic3R5bGUiIH0gXTsNCiAgICBwYXJhbXMucHVzaChhcnIpOw0KDQogICAgdmFyIGl0ZW0gPSBbIkluYm91bmQiLCB0aGlzLmluY2FsbENvdW50LCAicHVycGxlIl07DQogICAgcGFyYW1zLnB1c2goaXRlbSk7DQoNCiAgICB2YXIgaXRlbSA9IFsiT3V0Ym91bmQiLCB0aGlzLm91dGNhbGxDb3VudCwgImJyb3duIl07DQogICAgcGFyYW1zLnB1c2goaXRlbSk7DQoNCiAgICBpdGVtID0gWyJNaXNzZWQiLCB0aGlzLm1pc3NlZENhbGxDb3VudCwgImJsdWUiXTsNCiAgICBwYXJhbXMucHVzaChpdGVtKTsNCg0KICAgIGl0ZW0gPSBbIlZvaWNlbWFpbCIsIHRoaXMudm9pY2VtYWlsQ291bnQsICJncmVlbiJdOw0KICAgIHBhcmFtcy5wdXNoKGl0ZW0pOw0KICAgIGRyYXdCYXJDaGFydCh3LCBoLCBwYXJhbXMpOw0KICB9LA0KICBDYWxsc0J5RGlyZWN0aW9uR3JhcGg6IGZ1bmN0aW9uKHcsIGgpew0KICAgIHZhciBwYXJhbXMgPSBbXTsNCiAgICB2YXIgYXJyID0gWydDYWxscyBieSBkaXJlY3Rpb24nLCAnRGlyZWN0aW9uJywgeyByb2xlOiAic3R5bGUiIH0gXTsNCiAgICBwYXJhbXMucHVzaChhcnIpOw0KICAgIHZhciBpdGVtID0gWyJJbmJvdW5kIiwgdGhpcy5pbmNhbGxDb3VudCwgImJsdWUiXTsNCiAgICBwYXJhbXMucHVzaChpdGVtKTsNCg0KICAgIGl0ZW0gPSBbIk91dGJvdW5kIiwgdGhpcy5vdXRjYWxsQ291bnQsICJncmVlbiJdOw0KICAgIHBhcmFtcy5wdXNoKGl0ZW0pOw0KICAgIGRyYXdCYXJDaGFydCh3LCBoLCBwYXJhbXMpOw0KICB9LA0KICBDYWxsc0J5RHVyYXRpb25HcmFwaDogZnVuY3Rpb24odywgaCl7DQogICAgdmFyIHBhcmFtcyA9IFtdOw0KICAgIHZhciBhcnIgPSBbJ0NhbGxzIGR1cmF0aW9uIChtaW4pJywgJ0R1cmF0aW9uJywgeyByb2xlOiAic3R5bGUiIH1dOw0KICAgIHBhcmFtcy5wdXNoKGFycik7DQogICAgaXRlbSA9IFsiSW5ib3VuZCIsIHRoaXMudG90YWxJbmNhbGxzRHVyYXRpb24vNjAsICJibHVlIl07DQogICAgcGFyYW1zLnB1c2goaXRlbSk7DQoNCiAgICBpdGVtID0gW107DQogICAgdmFyIGl0ZW0gPSBbIk91dGJvdW5kIiwgdGhpcy50b3RhbE91dGNhbGxzRHVyYXRpb24vNjAsICJncmVlbiJdOw0KICAgIHBhcmFtcy5wdXNoKGl0ZW0pOw0KICAgIGRyYXdCYXJDaGFydCh3LCBoLCBwYXJhbXMpDQogIH0sDQogIENhbGxzQnlSZWNvcmRpbmdHcmFwaDogZnVuY3Rpb24odywgaCl7DQogICAgdmFyIHBhcmFtcyA9IFtdOw0KICAgIHZhciBhcnIgPSBbJ0NhbGxzIHdpdGggcmVjb3JkaW5nJywgJ1JlY29yZGluZycsIHsgcm9sZTogInN0eWxlIiB9XTsNCiAgICBwYXJhbXMucHVzaChhcnIpOw0KICAgIGl0ZW0gPSBbIkluYm91bmQgUmVjLiIsIHRoaXMuaW5jYWxsUmVjb3JkaW5nQ291bnQsICJibHVlIl07DQogICAgcGFyYW1zLnB1c2goaXRlbSk7DQoNCiAgICBpdGVtID0gW107DQogICAgdmFyIGl0ZW0gPSBbIk91dGJvdW5kIFJlYy4iLCB0aGlzLm91dGNhbGxSZWNvcmRpbmdDb3VudCwgImdyZWVuIl07DQogICAgcGFyYW1zLnB1c2goaXRlbSk7DQogICAgZHJhd0JhckNoYXJ0KHcsIGgsIHBhcmFtcykNCiAgfSwNCiAgRmF4ZXNCeURpcmVjdGlvbkdyYXBoOiBmdW5jdGlvbih3LCBoKXsNCiAgICB2YXIgcGFyYW1zID0gW107DQogICAgdmFyIGFyciA9IFsnRmF4ZXMgYnkgZGlyZWN0aW9uJywgJ0RpcmVjdGlvbicsIHsgcm9sZTogInN0eWxlIiB9IF07DQogICAgcGFyYW1zLnB1c2goYXJyKTsNCiAgICB2YXIgaXRlbSA9IFsiSW5ib3VuZCIsIHRoaXMuaW5mYXhDb3VudCwgImJsdWUiXTsNCiAgICBwYXJhbXMucHVzaChpdGVtKTsNCg0KICAgIGl0ZW0gPSBbIk91dGJvdW5kIiwgdGhpcy5vdXRmYXhDb3VudCwgImdyZWVuIl07DQogICAgcGFyYW1zLnB1c2goaXRlbSk7DQogICAgZHJhd0JhckNoYXJ0KHcsIGgsIHBhcmFtcyk7DQogIH0sDQogIEZheGVzQnlEdXJhdGlvbkdyYXBoOiBmdW5jdGlvbih3LCBoKXsNCiAgICB2YXIgcGFyYW1zID0gW107DQogICAgdmFyIGFyciA9IFsnRmF4ZXMgZHVyYXRpb24gKG1pbiknLCAnRHVyYXRpb24nLCB7IHJvbGU6ICJzdHlsZSIgfV07DQogICAgcGFyYW1zLnB1c2goYXJyKTsNCiAgICBpdGVtID0gWyJJbmJvdW5kIiwgdGhpcy50b3RhbEluZmF4ZXNEdXJhdGlvbi82MCwgImJsdWUiXTsNCiAgICBwYXJhbXMucHVzaChpdGVtKTsNCg0KICAgIGl0ZW0gPSBbXTsNCiAgICB2YXIgaXRlbSA9IFsiT3V0Ym91bmQiLCB0aGlzLnRvdGFsT3V0ZmF4ZXNEdXJhdGlvbi82MCwgImdyZWVuIl07DQogICAgcGFyYW1zLnB1c2goaXRlbSk7DQogICAgZHJhd0JhckNoYXJ0KHcsIGgsIHBhcmFtcykNCiAgfSwNCiAgQ2FsbHNEZW5zaXR5R3JhcGg6IGZ1bmN0aW9uKHcsIGgpew0KICAgIHRoaXMuX19jcmVhdGVDYWxsc0RlbnNpdHkoKQ0KICAgIHBhcmFtcyA9IFtdOw0KICAgIHZhciBhcnIgPSBbJ0luYm91bmQgQ2FsbHMgZGVuc2l0eScsICcnXTsNCiAgICBwYXJhbXMucHVzaChhcnIpOw0KICAgIGZvciAodmFyIHQ9MDsgdDwyNDsgdCsrKXsNCiAgICAgIHZhciBpdGVtID0gW107DQogICAgICBpdGVtLnB1c2godCk7DQogICAgICBpdGVtLnB1c2godGhpcy50aW1lU2xpY2VJbmJvdW5kW3RdKTsNCiAgICAgIHBhcmFtcy5wdXNoKGl0ZW0pOw0KICAgIH0NCiAgICBkcmF3U2NhdHRlckNoYXJ0KHcsIGgsIHBhcmFtcywgIkluYm91bmQgQ2FsbHMgZGVuc2l0eSIpDQoNCiAgICBwYXJhbXMgPSBbXTsNCiAgICBhcnIgPSBbJ091dGJvdW5kIENhbGxzIGRlbnNpdHknLCAnJ107DQogICAgcGFyYW1zLnB1c2goYXJyKTsNCiAgICBmb3IgKHZhciB0PTA7IHQ8MjQ7IHQrKyl7DQogICAgICB2YXIgaXRlbSA9IFtdOw0KICAgICAgaXRlbS5wdXNoKHQpOw0KICAgICAgaXRlbS5wdXNoKHRoaXMudGltZVNsaWNlT3V0Ym91bmRbdF0pOw0KICAgICAgcGFyYW1zLnB1c2goaXRlbSk7DQogICAgfQ0KICAgIGRyYXdTY2F0dGVyQ2hhcnQodywgaCwgcGFyYW1zLCAiT3V0Ym91bmQgQ2FsbHMgZGVuc2l0eSIpDQoNCiAgICBwYXJhbXMgPSBbXTsNCiAgICBhcnIgPSBbJ01pc3NlZCBDYWxscyBkZW5zaXR5JywgJyddOw0KICAgIHBhcmFtcy5wdXNoKGFycik7DQogICAgZm9yICh2YXIgdD0wOyB0PDI0OyB0Kyspew0KICAgICAgdmFyIGl0ZW0gPSBbXTsNCiAgICAgIGl0ZW0ucHVzaCh0KTsNCiAgICAgIGl0ZW0ucHVzaCh0aGlzLnRpbWVTbGljZU1pc3NlZENhbGxzW3RdKTsNCiAgICAgIHBhcmFtcy5wdXNoKGl0ZW0pOw0KICAgIH0NCiAgICBkcmF3U2NhdHRlckNoYXJ0KHcsIGgsIHBhcmFtcywgIk1pc3NlZCBDYWxscyBkZW5zaXR5IikNCg0KICAgIHBhcmFtcyA9IFtdOw0KICAgIGFyciA9IFsnVm9pY2VtYWlsIGRlbnNpdHknLCAnJ107DQogICAgcGFyYW1zLnB1c2goYXJyKTsNCiAgICBmb3IgKHZhciB0PTA7IHQ8MjQ7IHQrKyl7DQogICAgICB2YXIgaXRlbSA9IFtdOw0KICAgICAgaXRlbS5wdXNoKHQpOw0KICAgICAgaXRlbS5wdXNoKHRoaXMudGltZVNsaWNlVm9pY2VtYWlsc1t0XSk7DQogICAgICBwYXJhbXMucHVzaChpdGVtKTsNCiAgICB9DQogICAgZHJhd1NjYXR0ZXJDaGFydCh3LCBoLCBwYXJhbXMsICJWb2ljZW1haWxzIGRlbnNpdHkiKQ0KICB9LA0KICBDYWxsc01hcEdyYXBoOiBmdW5jdGlvbih3LCBoKXsNCiAgICB2YXIgcGFyYW1zID0gW107DQogICAgdmFyIGFyciA9IFsnQ2l0eScsJ0NhbGxzIENvdW50J107DQogICAgaWYgKCQoIiNvbm1hcCIpLnZhbCgpID09ICJpbmJvdW5kIil7DQogICAgICBmb3IgKHZhciBsb2MxIG9mIHRoaXMuaW5ib3VuZENhbGxMb2NhdGlvbnMpew0KICAgICAgICB2YXIgaXRlbSA9IFtdOw0KICAgICAgICB2YXIgaW5DaXR5ID0gbG9jMS5jaXR5ICsgIjoiICsgbG9jMS5jb3VudA0KICAgICAgICBpdGVtLnB1c2goaW5DaXR5KTsNCiAgICAgICAgcGFyYW1zLnB1c2goaXRlbSk7DQogICAgICB9DQogICAgfWVsc2UgaWYgKCQoIiNvbm1hcCIpLnZhbCgpID09ICJvdXRib3VuZCIpew0KICAgICAgZm9yICh2YXIgbG9jMSBvZiB0aGlzLm91dGJvdW5kQ2FsbExvY2F0aW9ucyl7DQogICAgICAgIHZhciBpdGVtID0gW107DQogICAgICAgIHZhciBpbkNpdHkgPSBsb2MxLmNpdHkgKyAiOiIgKyBsb2MxLmNvdW50DQogICAgICAgIGl0ZW0ucHVzaChpbkNpdHkpOw0KICAgICAgICBwYXJhbXMucHVzaChpdGVtKTsNCiAgICAgIH0NCiAgICB9ZWxzZXsNCiAgICAgIGZvciAodmFyIGxvYzEgb2YgdGhpcy5pbmJvdW5kQ2FsbExvY2F0aW9ucyl7DQogICAgICAgIHZhciBpdGVtID0gW107DQogICAgICAgIHZhciBpbkNpdHkgPSBsb2MxLmNpdHkgKyAiOiIgKyBsb2MxLmNvdW50DQogICAgICAgIGl0ZW0ucHVzaChpbkNpdHkpOw0KICAgICAgICBwYXJhbXMucHVzaChpdGVtKTsNCiAgICAgIH0NCiAgICAgIGZvciAodmFyIGxvYzEgb2YgdGhpcy5vdXRib3VuZENhbGxMb2NhdGlvbnMpew0KICAgICAgICB2YXIgaXRlbSA9IFtdOw0KICAgICAgICB2YXIgaW5DaXR5ID0gbG9jMS5jaXR5ICsgIjoiICsgbG9jMS5jb3VudA0KICAgICAgICBpdGVtLnB1c2goaW5DaXR5KTsNCiAgICAgICAgcGFyYW1zLnB1c2goaXRlbSk7DQogICAgICB9DQogICAgfQ0KICAgIGRyYXdNYXBDaGFydCh3LCBoLCBwYXJhbXMsICJDYWxsIG1hcCIpDQogIH0NCn0NCg0KZnVuY3Rpb24gcmVmcmVzaEdyYXBoKCkgew0KICBkcmF3R3JhcGhzKCkNCn0NCmZ1bmN0aW9uIGRyYXdHcmFwaHMoKXsNCiAgJCgiI3RpbWV6b25lX2Jsb2NrIikuaGlkZSgpDQogICQoIiNtYXBfYmxvY2siKS5oaWRlKCkNCiAgJCgiI2dyYXBocyIpLmVtcHR5KCkNCiAgdmFyIHcgPSAkKHdpbmRvdykud2lkdGgoKTsNCiAgdmFyIHNlbGVjdGVkT3B0aW9uID0gJCgnI2dyYXBob3B0aW9uJykudmFsKCkNCiAgaWYgKHNlbGVjdGVkT3B0aW9uID09ICdjYWxsYnl0eXBlJyl7DQogICAgY2FsbExvZ3NEYXRhLkZheFZzVm9pY2VHcmFwaCh3LzIsIHcvNCkNCiAgICBjYWxsTG9nc0RhdGEuQ2FsbHNGYXhlc0J5RGlyZWN0aW9uR3JhcGgody8yLCB3LzQpDQogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PSAnY2FsbGJ5ZHVyYXRpb24nKXsNCiAgICBjYWxsTG9nc0RhdGEuQ2FsbHNCeURpcmVjdGlvbkdyYXBoKHcvMywgdy80KQ0KICAgIGNhbGxMb2dzRGF0YS5DYWxsc0J5RHVyYXRpb25HcmFwaCh3LzMsIHcvNCkNCiAgICBjYWxsTG9nc0RhdGEuQ2FsbHNCeVJlY29yZGluZ0dyYXBoKHcvMywgdy80KQ0KICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT0gJ2ZheGJ5ZHVyYXRpb24nKXsNCiAgICBjYWxsTG9nc0RhdGEuRmF4ZXNCeURpcmVjdGlvbkdyYXBoKHcvMiwgdy80KQ0KICAgIGNhbGxMb2dzRGF0YS5GYXhlc0J5RHVyYXRpb25HcmFwaCh3LzIsIHcvNCkNCiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09ICdpbmNhbGx3aXRocmVzdWx0cycpew0KICAgIGlmIChjYWxsTG9nc0RhdGEuaW5jYWxsQ291bnQgPD0gMCkgew0KICAgICAgYWxlcnQoIk5vIGluYm91bmQgY2FsbCBkdXJpbmcgdGhpcyBwZXJpb2QuIikNCiAgICAgIHJldHVybg0KICAgIH0NCiAgICBjYWxsTG9nc0RhdGEuQ2FsbHNXaXRoUmVzdWx0c0dyYXBoKHctMTAwLCB3LzQsICJpbmNhbGwiKQ0KICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT0gJ291dGNhbGx3aXRocmVzdWx0cycpew0KICAgIGlmIChjYWxsTG9nc0RhdGEub3V0Y2FsbENvdW50IDw9IDApIHsNCiAgICAgIGFsZXJ0KCJObyBvdXRib3VuZCBjYWxsIGR1cmluZyB0aGlzIHBlcmlvZC4iKQ0KICAgICAgcmV0dXJuDQogICAgfQ0KICAgIGNhbGxMb2dzRGF0YS5DYWxsc1dpdGhSZXN1bHRzR3JhcGgody0xMDAsIHcvNCwgIm91dGNhbGwiKQ0KICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT0gJ2luZmF4d2l0aHJlc3VsdHMnKXsNCiAgICBpZiAoY2FsbExvZ3NEYXRhLmluZmF4Q291bnQgPD0gMCkgew0KICAgICAgYWxlcnQoIk5vIGluYm91bmQgZmF4IGR1cmluZyB0aGlzIHBlcmlvZC4iKQ0KICAgICAgcmV0dXJuDQogICAgfQ0KICAgIGNhbGxMb2dzRGF0YS5DYWxsc1dpdGhSZXN1bHRzR3JhcGgody0xMDAsIHcvNCwgImluZmF4IikNCiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09ICdvdXRmYXh3aXRocmVzdWx0cycpew0KICAgIGlmIChjYWxsTG9nc0RhdGEub3V0ZmF4Q291bnQgPD0gMCkgew0KICAgICAgYWxlcnQoIk5vIG91dGJvdW5kIGZheCBkdXJpbmcgdGhpcyBwZXJpb2QuIikNCiAgICAgIHJldHVybg0KICAgIH0NCiAgICBjYWxsTG9nc0RhdGEuQ2FsbHNXaXRoUmVzdWx0c0dyYXBoKHctMTAwLCB3LzQsICJvdXRmYXgiKQ0KICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT0gJ2luY2FsbHdpdGhhY3Rpb25zJyl7DQogICAgaWYgKGNhbGxMb2dzRGF0YS5pbmNhbGxDb3VudCA8PSAwKSB7DQogICAgICBhbGVydCgiTm8gaW5ib3VuZCBjYWxsIGR1cmluZyB0aGlzIHBlcmlvZC4iKQ0KICAgICAgcmV0dXJuDQogICAgfQ0KICAgIGNhbGxMb2dzRGF0YS5DYWxsc1dpdGhBY3Rpb25zR3JhcGgody0xMDAsIHcvNCwgImluY2FsbCIpDQogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PSAnb3V0Y2FsbHdpdGhhY3Rpb25zJyl7DQogICAgaWYgKGNhbGxMb2dzRGF0YS5vdXRjYWxsQ291bnQgPD0gMCkgew0KICAgICAgYWxlcnQoIk5vIG91dGJvdW5kIGNhbGwgZHVyaW5nIHRoaXMgcGVyaW9kLiIpDQogICAgICByZXR1cm4NCiAgICB9DQogICAgY2FsbExvZ3NEYXRhLkNhbGxzV2l0aEFjdGlvbnNHcmFwaCh3LTEwMCwgdy80LCAib3V0Y2FsbCIpDQogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PSAnaW5mYXh3aXRoYWN0aW9ucycpew0KICAgIGlmIChjYWxsTG9nc0RhdGEuaW5mYXhDb3VudCA8PSAwKSB7DQogICAgICBhbGVydCgiTm8gaW5ib3VuZCBmYXggZHVyaW5nIHRoaXMgcGVyaW9kLiIpDQogICAgICByZXR1cm4NCiAgICB9DQogICAgY2FsbExvZ3NEYXRhLkNhbGxzV2l0aEFjdGlvbnNHcmFwaCh3LTEwMCwgdy80LCAiaW5mYXgiKQ0KICB9ZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb24gPT0gJ291dGZheHdpdGhhY3Rpb25zJyl7DQogICAgaWYgKGNhbGxMb2dzRGF0YS5vdXRmYXhDb3VudCA8PSAwKSB7DQogICAgICBhbGVydCgiTm8gb3V0Ym91bmQgZmF4IGR1cmluZyB0aGlzIHBlcmlvZC4iKQ0KICAgICAgcmV0dXJuDQogICAgfQ0KICAgIGNhbGxMb2dzRGF0YS5DYWxsc1dpdGhBY3Rpb25zR3JhcGgody0xMDAsIHcvNCwgIm91dGZheCIpDQogIH1lbHNlIGlmIChzZWxlY3RlZE9wdGlvbiA9PSAnY2FsbHNkZW5zaXR5Jyl7DQogICAgJCgiI3RpbWV6b25lX2Jsb2NrIikuc2hvdygpDQogICAgJCgiI21hcF9ibG9jayIpLmhpZGUoKQ0KICAgIGNhbGxMb2dzRGF0YS5DYWxsc0RlbnNpdHlHcmFwaCh3LzQsIHcvNikNCiAgfWVsc2UgaWYgKHNlbGVjdGVkT3B0aW9uID09ICdjYWxsc21hcCcpew0KICAgICQoIiN0aW1lem9uZV9ibG9jayIpLmhpZGUoKQ0KICAgICQoIiNtYXBfYmxvY2siKS5zaG93KCkNCiAgICBjYWxsTG9nc0RhdGEuQ2FsbHNNYXBHcmFwaCh3LCB3LzMpDQogIH0NCn0NCg0KZnVuY3Rpb24gcmVhZENhbGxMb2dzKCl7DQogIHZhciBjb25maWdzID0ge30NCiAgaWYgKCQoJyNwaG9uZU51bWJlcicpLnZhbCgpICE9ICIiKQ0KICAgIGNvbmZpZ3NbJ3Bob25lTnVtYmVyJ10gPSAkKCcjcGhvbmVOdW1iZXInKS52YWwoKQ0KICBpZiAoJCgnI2V4dGVuc2lvbicpLnZhbCgpICE9ICIiKQ0KICAgIGNvbmZpZ3NbJ2V4dGVuc2lvbk51bWJlciddID0gJCgnI2V4dGVuc2lvbicpLnZhbCgpDQoNCiAgaWYgKCQoJyNkaXJlY3Rpb24nKS52YWwoKSAhPSAiZGVmYXVsdCIpDQogICAgY29uZmlnc1snZGlyZWN0aW9uJ10gPSAkKCcjZGlyZWN0aW9uJykudmFsKCkNCiAgaWYgKCQoJyN0eXBlJykudmFsKCkgIT0gImRlZmF1bHQiKQ0KICAgIGNvbmZpZ3NbJ3R5cGUnXSA9ICQoJyN0eXBlJykudmFsKCkNCiAgaWYgKCQoJyN0cmFuc3BvcnQnKS52YWwoKSAhPSAiZGVmYXVsdCIpDQogICAgY29uZmlnc1sndHJhbnNwb3J0J10gPSAkKCcjdHJhbnNwb3J0JykudmFsKCkNCg0KICBjb25maWdzWyd2aWV3J10gPSAkKCcjdmlldycpLnZhbCgpDQoNCiAgY29uZmlnc1snc2hvd0Jsb2NrZWQnXSA9ICgkKCcjc2hvd0Jsb2NrZWQnKS5pcygiOmNoZWNrZWQiKSkgPyB0cnVlIDogZmFsc2UNCiAgY29uZmlnc1snd2l0aFJlY29yZGluZyddID0gKCQoJyN3aXRoUmVjb3JkaW5nJykuaXMoIjpjaGVja2VkIikpID8gdHJ1ZSA6IGZhbHNlDQogIGNvbmZpZ3NbJ2RhdGVGcm9tJ10gPSAkKCIjZnJvbWRhdGVwaWNrZXIiKS52YWwoKSArICJUMDA6MDA6MDAuMDAwWiINCiAgY29uZmlnc1snZGF0ZVRvJ10gPSAkKCIjdG9kYXRlcGlja2VyIikudmFsKCkgKyAiVDIzOjU5OjU5Ljk5OVoiDQogIGNvbmZpZ3NbJ3BlclBhZ2UnXSA9IDEwMDANCg0KICB2YXIgdXJsID0gIi9yZWFkbG9nP2FjY2Vzcz0iICsgJCgnI2FjY2Vzc19sZXZlbCcpLnZhbCgpOw0KICB1cmwgKz0gIiZwYXJhbXM9IiArIEpTT04uc3RyaW5naWZ5KGNvbmZpZ3MpDQogIHZhciBwb3N0aW5nID0gJC5nZXQoIHVybCApOw0KICBwb3N0aW5nLmRvbmUoZnVuY3Rpb24oIHJlc3BvbnNlICkgew0KICAgIHZhciByZXMgPSBKU09OLnBhcnNlKHJlc3BvbnNlKQ0KICAgIGlmIChyZXMuaGFzT3duUHJvcGVydHkoJ2NhbGxsb2dfZXJyb3InKSl7DQogICAgICBhbGVydChyZXMuY2FsbGxvZ19lcnJvcikNCiAgICB9ZWxzZXsNCiAgICAgIGNhbGxMb2dzRGF0YSA9IG5ldyBDYWxsTG9nc0RhdGEocmVzKQ0KICAgICAgZHJhd0dyYXBocygpDQogICAgfQ0KICB9KTsNCiAgcG9zdGluZy5mYWlsKGZ1bmN0aW9uKHJlc3BvbnNlKXsNCiAgICBhbGVydChyZXNwb25zZS5zdGF0dXNUZXh0KTsNCiAgfSk7DQp9DQoNCmZ1bmN0aW9uIGRyYXdQaWVDaGFydChwYXJhbXMpDQp7DQogICAgdmFyIGRhdGEgPSBnb29nbGUudmlzdWFsaXphdGlvbi5hcnJheVRvRGF0YVRhYmxlKHBhcmFtcyk7DQoNCiAgICB2YXIgb3B0aW9ucyA9IHsNCiAgICAgICAgdGl0bGU6IHBhcmFtc1swXVswXSwNCiAgICAgICAgcGllU2xpY2VUZXh0OiAndmFsdWUnLA0KICAgICAgICBsZWdlbmQ6ICdib3RoJywNCiAgICAgICAgcGllSG9sZTogMC40LA0KICAgIH07DQogICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7DQogICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgImRpc3BsYXk6aW5saW5lOyIpOw0KICAgICQoIiNncmFwaHMiKS5hcHBlbmQoZWxlbWVudCkNCiAgICB2YXIgY2hhcnQgPSBuZXcgZ29vZ2xlLnZpc3VhbGl6YXRpb24uUGllQ2hhcnQoZWxlbWVudCk7DQogICAgY2hhcnQuZHJhdyhkYXRhLCBvcHRpb25zKTsNCn0NCg0KZnVuY3Rpb24gZHJhd0JhckNoYXJ0KHcsIGgsIHBhcmFtcykNCnsNCiAgICB2YXIgZGF0YSA9IGdvb2dsZS52aXN1YWxpemF0aW9uLmFycmF5VG9EYXRhVGFibGUocGFyYW1zKTsNCiAgICB2YXIgdmlldyA9IG5ldyBnb29nbGUudmlzdWFsaXphdGlvbi5EYXRhVmlldyhkYXRhKTsNCiAgICB2aWV3LnNldENvbHVtbnMoWzAsIDEsDQogICAgICAgICAgICAgICAgICAgIHsgY2FsYzogInN0cmluZ2lmeSIsDQogICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUNvbHVtbjogMSwNCiAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN0cmluZyIsDQogICAgICAgICAgICAgICAgICAgICAgIHJvbGU6ICJhbm5vdGF0aW9uIg0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAyXSk7DQoNCiAgICB2YXIgb3B0aW9ucyA9IHsNCiAgICAgIHRpdGxlOiBwYXJhbXNbMF1bMF0sDQogICAgICB3aWR0aDogdywNCiAgICAgIGhlaWdodDogaCwNCiAgICAgIGJhcjoge2dyb3VwV2lkdGg6ICI5NSUifSwNCiAgICAgIGxlZ2VuZDogeyBwb3NpdGlvbjogIm5vbmUiIH0sDQogICAgfTsNCg0KICAgIHZhciB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7DQogICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKQ0KICAgIHRkLmFwcGVuZChlbGVtZW50KQ0KICAgICQoIiNncmFwaHMiKS5hcHBlbmQodGQpDQogICAgdmFyIGNoYXJ0ID0gbmV3IGdvb2dsZS52aXN1YWxpemF0aW9uLkNvbHVtbkNoYXJ0KGVsZW1lbnQpOw0KICAgIGNoYXJ0LmRyYXcodmlldywgb3B0aW9ucyk7DQp9DQoNCmZ1bmN0aW9uIGRyYXdTY2F0dGVyQ2hhcnQodywgaCwgcGFyYW1zLCB0aXRsZSkgew0KICAgIHZhciBkYXRhID0gZ29vZ2xlLnZpc3VhbGl6YXRpb24uYXJyYXlUb0RhdGFUYWJsZShwYXJhbXMpOw0KICAgIHZhciBvcHRpb25zID0gew0KICAgICAgdGl0bGU6IHRpdGxlLA0KICAgICAgd2lkdGg6IHcsDQogICAgICBoZWlnaHQ6IGgsDQogICAgICBoQXhpczoge3ZpZXdXaW5kb3c6IHsgbWluOiAwLCBtYXg6IDIzIH0sIHRpdGxlOiAnMjQtSG91cid9LA0KICAgICAgdkF4aXM6IHt0aXRsZTogJ0NhbGxzJ30sDQogICAgICBwb2ludFNoYXBlOiAnZGlhbW9uZCcsDQogICAgICBsZWdlbmQ6ICdub25lJywNCiAgICB9Ow0KDQogICAgdmFyIHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTsNCiAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpDQogICAgdGQuYXBwZW5kKGVsZW1lbnQpDQogICAgJCgiI2dyYXBocyIpLmFwcGVuZCh0ZCkNCiAgICB2YXIgY2hhcnQgPSBuZXcgZ29vZ2xlLnZpc3VhbGl6YXRpb24uU2NhdHRlckNoYXJ0KGVsZW1lbnQpOw0KICAgIGNoYXJ0LmRyYXcoZGF0YSwgb3B0aW9ucyk7DQp9DQoNCmZ1bmN0aW9uIGRyYXdNYXBDaGFydCh3LCBoLCBwYXJhbXMsIHRpdGxlKSB7DQogICAgdmFyIGRhdGEgPSBnb29nbGUudmlzdWFsaXphdGlvbi5hcnJheVRvRGF0YVRhYmxlKHBhcmFtcyk7DQogICAgdmFyIG9wdGlvbnMgPSB7DQogICAgICB3aWR0aDogdywNCiAgICAgIGhlaWdodDogaCwNCiAgICAgIHpvb21MZXZlbDogNSwNCiAgICAgIHNob3dUb29sdGlwOiB0cnVlLA0KICAgICAgc2hvd0luZm9XaW5kb3c6IHRydWUsDQogICAgfTsNCiAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOw0KICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykNCiAgICB0ZC5hcHBlbmQoZWxlbWVudCkNCiAgICAkKCIjZ3JhcGhzIikuYXBwZW5kKHRkKQ0KICAgIHZhciBtYXAgPSBuZXcgZ29vZ2xlLnZpc3VhbGl6YXRpb24uTWFwKGVsZW1lbnQpOw0KICAgIG1hcC5kcmF3KGRhdGEsIG9wdGlvbnMpOw0KfQ0K</textarea>
<textarea class="saurus-file" data-file="../index.py" data-mode="python">ZnJvbSByaW5nY2VudHJhbCBpbXBvcnQgU0RLCmltcG9ydCBvcwppbXBvcnQganNvbgpmcm9tIGRvdGVudiBpbXBvcnQgbG9hZF9kb3RlbnYKZG90ZW52X3BhdGggPSAnLmVudicKbG9hZF9kb3RlbnYoZG90ZW52X3BhdGgpCmZyb20gZmxhc2sgaW1wb3J0IEZsYXNrLCBqc29uaWZ5LCByZW5kZXJfdGVtcGxhdGUsIHJlcXVlc3QKCmFwcCA9IEZsYXNrKF9fbmFtZV9fKQpwbGF0Zm9ybSA9IE5vbmUKCkBhcHAucm91dGUoJy8nKQpAYXBwLnJvdXRlKCcvaW5kZXgnKQpkZWYgaW5kZXgoKToKICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoJ2luZGV4Lmh0bWwnLCB0aXRsZT0nSG9tZScpCgpAYXBwLnJvdXRlKCcvcmVhZGxvZycsIG1ldGhvZHM9WydHRVQnXSkKZGVmIGxvZ2luKCk6CiAgICBnbG9iYWwgcGxhdGZvcm0KICAgIGlmIG9zLmVudmlyb24uZ2V0KCJFTlZJUk9OTUVOVF9NT0RFIikgPT0gInNhbmRib3giOgogICAgICAgIHJjc2RrID0gU0RLKG9zLmVudmlyb24uZ2V0KCJDTElFTlRfSURfU0IiKSwgb3MuZW52aXJvbi5nZXQoIkNMSUVOVF9TRUNSRVRfU0IiKSwgJ2h0dHBzOi8vcGxhdGZvcm0uZGV2dGVzdC5yaW5nY2VudHJhbC5jb20nKQogICAgICAgIHVzZXJuYW1lID0gb3MuZW52aXJvbi5nZXQoIlVTRVJOQU1FX1NCIikKICAgICAgICBwd2QgPSBvcy5lbnZpcm9uLmdldCgiUEFTU1dPUkRfU0IiKQogICAgZWxzZToKICAgICAgICByY3NkayA9IFNESyhvcy5lbnZpcm9uLmdldCgiQ0xJRU5UX0lEX1BST0QiKSwgb3MuZW52aXJvbi5nZXQoIkNMSUVOVF9TRUNSRVRfUFJPRCIpLCAnaHR0cHM6Ly9wbGF0Zm9ybS5yaW5nY2VudHJhbC5jb20nKQogICAgICAgIHVzZXJuYW1lID0gb3MuZW52aXJvbi5nZXQoIlVTRVJOQU1FX1BST0QiKQogICAgICAgIHB3ZCA9IG9zLmVudmlyb24uZ2V0KCJQQVNTV09SRF9QUk9EIikKICAgIHBsYXRmb3JtID0gcmNzZGsucGxhdGZvcm0oKQogICAgCiAgICB0cnk6CiAgICAgICAgcGxhdGZvcm0ubG9naW4odXNlcm5hbWUsICcnLCBwd2QpCiAgICAgICAgcmVzID0gcmVhZENhbGxMb2dzKCkKICAgICAgICByZXR1cm4ganNvbi5kdW1wcyhyZXMpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgZXJyb3JSZXMgPSB7ImNhbGxsb2dfZXJyb3IiOiJDYW5ub3QgbG9naW4uIn0KICAgICAgICByZXR1cm4gZXJyb3JSZXMKCmRlZiByZWFkQ2FsbExvZ3MoKSA6CiAgICBnbG9iYWwgcGxhdGZvcm0KICAgIGFjY2VzcyA9IHJlcXVlc3QuYXJncy5nZXQoJ2FjY2VzcycsICJhY2NvdW50IikKICAgIGVuZHBvaW50ID0gIi9hY2NvdW50L34vZXh0ZW5zaW9uL34vY2FsbC1sb2ciOwogICAgaWYgYWNjZXNzID09ICJhY2NvdW50IjoKICAgICAgICBlbmRwb2ludCA9ICIvYWNjb3VudC9+L2NhbGwtbG9nIjsKCiAgICB0cnk6CiAgICAgICAgcGFyYW1zID0gcmVxdWVzdC5hcmdzLmdldCgncGFyYW1zJywgTm9uZSkKICAgICAgICBpZiBwYXJhbXMgIT0gTm9uZToKICAgICAgICAgICAgY29uZmlncyA9IGpzb24ubG9hZHMocGFyYW1zKQogICAgICAgICAgICByZXNwb25zZSA9IHBsYXRmb3JtLmdldChlbmRwb2ludCwgY29uZmlncykKICAgICAgICAgICAganNvbk9iaiA9IGpzb24ubG9hZHMocmVzcG9uc2UucmVzcG9uc2UoKS5fY29udGVudCkKICAgICAgICAgICAgcmV0dXJuIGpzb25PYmpbJ3JlY29yZHMnXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGVycm9yUmVzID0geyJjYWxsbG9nX2Vycm9yIjoiTWlzaW5nIHF1ZXJ5IHBhcmFtZXRlcnMifQogICAgICAgICAgICByZXR1cm4gZXJyb3JSZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBlcnJvciA9IHN0cihlKQogICAgICAgIGlmIGVycm9yLmZpbmQoIlJlYWRDb21wYW55Q2FsbExvZyIpICE9IC0xOgogICAgICAgICAgICBlcnJvclJlcyA9IHsiY2FsbGxvZ19lcnJvciI6IllvdSBkbyBub3QgaGF2ZSBhZG1pbiByb2xlIHRvIGFjY2VzcyBhY2NvdW50IGxldmVsLiBZb3UgY2FuIGNob29zZSB0aGUgZXh0ZW5zaW9uIGFjY2VzcyBsZXZlbC4ifQogICAgICAgICAgICByZXR1cm4gZXJyb3JSZXMKICAgICAgICBlbHNlOgogICAgICAgICAgICBlcnJvclJlcyA9IHsiY2FsbGxvZ19lcnJvciI6IkNhbm5vdCBhY2Nlc3MgY2FsbCBsb2cuIn0KICAgICAgICAgICAgcmV0dXJuIGVycm9yUmVzCg==</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><div class="saurus-file-actions"><a href="https://github.com/ringcentral-tutorials/calllog-visualization-python-demo" target="_blank" class="explorer-get-code"><i class="fa fa-lg fa-github-square"></i>View Code on GitHub</a><a href="https://github.com/ringcentral-tutorials/calllog-visualization-python-demo/archive/master.zip" target="_blank" class="explorer-get-code"><i class="fa fa-lg icon-download"></i>Download Source Code</a></div></div></div></div><footer><div class="footer-content"><div class="footer-content-row layout-2-cols"><div class="footer-content-row-left"><div class="footer-logo"><a href="http://www.ringcentral.com"><span>Back to the main site</span></a></div></div><div class="footer-content-row-right"><ul class="footer-text-links"><li><a href="http://www.ringcentral.com/legal.html" target="_blank"><span>Legal</span></a></li><li><a href="http://www.ringcentral.com/security-statement.html" target="_blank"><span>Security Policy</span></a></li><li><a href="http://www.ringcentral.com/legal/privacy-policy.html" target="_blank"><span>Privacy Policy</span></a></li><li><a ng-href="https://devcommunity.ringcentral.com" target="_blank" href="https://devcommunity.ringcentral.com"><span>Community</span></a></li><li><a href="https://medium.com/ringcentral-developers" target="_blank"><span>Blog</span></a></li></ul></div></div><div class="footer-content-row footer-content-row-last layout-2-cols"><div class="footer-content-row-left"><span class="footer-copyright"> 1999-<span ng-bind="::main.nowObj|date:'yyyy'" class="footer-copyright-to ng-binding">2017</span> RingCentral, Inc. All rights reserved.</span></div><div class="footer-content-row-right"><div class="footer-image-links"><div class="footer-image-link footer-image-link-facebook"><a target="_blank" href="http://www.facebook.com/ringcentral"><i class="fa icon-facebook"></i></a></div><div class="footer-image-link footer-image-link-twitter"><a target="_blank" href="http://twitter.com/ringcentraldevs"><i class="fa icon-twitter"></i></a></div><div class="footer-image-link footer-image-link-google-plus"><a target="_blank" href="https://www.google.com/+ringcentral"><i class="fa icon-google_plus"></i></a></div><div class="footer-image-link footer-image-link-linkedin"><a target="_blank" href="http://www.linkedin.com/company/ringcentral"><i class="fa icon-linkedin"></i></a></div><div class="footer-image-link footer-image-link-youtube"><a target="_blank" href="http://www.youtube.com/ringcentral"><i class="fa icon-youtube"></i></a></div></div></div></div></div></footer></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script><script>window.tutorialName="Visualize Your Business Communications History";</script><script src="viewsaurus.js"></script></body></html>